var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Re(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var qt={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yt=function(r,e){return Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},Yt(r,e)};function a(r,e){Yt(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function nt(r){return typeof r=="function"}var me=!1,R={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){var e=new Error;""+e.stack}me=r},get useDeprecatedSynchronousErrorHandling(){return me}};function rt(r){setTimeout(function(){throw r},0)}var Rt={closed:!0,next:function(r){},error:function(r){if(R.useDeprecatedSynchronousErrorHandling)throw r;rt(r)},complete:function(){}},A=function(){return Array.isArray||function(r){return r&&typeof r.length=="number"}}();function Xt(r){return r!==null&&typeof r=="object"}var Tr=function(){function r(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,n){return n+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return r.prototype=Object.create(Error.prototype),r}(),vt=Tr,g=function(){function r(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return r.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,n=t._parentOrParents,i=t._ctorUnsubscribe,o=t._unsubscribe,s=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof r)n.remove(this);else if(n!==null)for(var u=0;u<n.length;++u){var c=n[u];c.remove(this)}if(nt(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(p){e=p instanceof vt?we(p.errors):[p]}}if(A(s))for(var u=-1,f=s.length;++u<f;){var h=s[u];if(Xt(h))try{h.unsubscribe()}catch(d){e=e||[],d instanceof vt?e=e.concat(we(d.errors)):e.push(d)}}if(e)throw new vt(e)}},r.prototype.add=function(e){var t=e;if(!e)return r.EMPTY;switch(typeof e){case"function":t=new r(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof r)){var n=t;t=new r,t._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=t._parentOrParents;if(i===null)t._parentOrParents=this;else if(i instanceof r){if(i===this)return t;t._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return t;var o=this._subscriptions;return o===null?this._subscriptions=[t]:o.push(t),t},r.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},r.EMPTY=function(e){return e.closed=!0,e}(new r),r}();function we(r){return r.reduce(function(e,t){return e.concat(t instanceof vt?t.errors:t)},[])}var Ft=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),l=function(r){a(e,r);function e(t,n,i){var o=r.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Rt;break;case 1:if(!t){o.destination=Rt;break}if(typeof t=="object"){t instanceof e?(o.syncErrorThrowable=t.syncErrorThrowable,o.destination=t,t.add(o)):(o.syncErrorThrowable=!0,o.destination=new Se(o,t));break}default:o.syncErrorThrowable=!0,o.destination=new Se(o,t,n,i);break}return o}return e.prototype[Ft]=function(){return this},e.create=function(t,n,i){var o=new e(t,n,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(g),Se=function(r){a(e,r);function e(t,n,i,o){var s=r.call(this)||this;s._parentSubscriber=t;var u,c=s;return nt(n)?u=n:n&&(u=n.next,i=n.error,o=n.complete,n!==Rt&&(c=Object.create(n),nt(c.unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=u,s._error=i,s._complete=o,s}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!R.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(n,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,i=R.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(n,this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)i?(n.syncErrorValue=t,n.syncErrorThrown=!0):rt(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;rt(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};!R.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(n,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(i){if(this.unsubscribe(),R.useDeprecatedSynchronousErrorHandling)throw i;rt(i)}},e.prototype.__tryOrSetError=function(t,n,i){if(!R.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,i)}catch(o){return R.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=o,t.syncErrorThrown=!0,!0):(rt(o),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(l);function te(r){for(;r;){var e=r,t=e.closed,n=e.destination,i=e.isStopped;if(t||i)return!1;n&&n instanceof l?r=n:r=null}return!0}function Cr(r,e,t){if(r){if(r instanceof l)return r;if(r[Ft])return r[Ft]()}return!r&&!e&&!t?new l(Rt):new l(r,e,t)}var ut=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function $(r){return r}function $t(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Fe(r)}function Fe(r){return r.length===0?$:r.length===1?r[0]:function(t){return r.reduce(function(n,i){return i(n)},t)}}var y=function(){function r(e){this._isScalar=!1,e&&(this._subscribe=e)}return r.prototype.lift=function(e){var t=new r;return t.source=this,t.operator=e,t},r.prototype.subscribe=function(e,t,n){var i=this.operator,o=Cr(e,t,n);if(i?o.add(i.call(o,this.source)):o.add(this.source||R.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),R.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},r.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){R.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),te(e)?e.error(t):console.warn(t)}},r.prototype.forEach=function(e,t){var n=this;return t=ge(t),new t(function(i,o){var s;s=n.subscribe(function(u){try{e(u)}catch(c){o(c),s&&s.unsubscribe()}},o,i)})},r.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},r.prototype[ut]=function(){return this},r.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:Fe(e)(this)},r.prototype.toPromise=function(e){var t=this;return e=ge(e),new e(function(n,i){var o;t.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},r.create=function(e){return new r(e)},r}();function ge(r){if(r||(r=R.Promise||Promise),!r)throw new Error("no Promise impl found");return r}var Or=function(){function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r}(),q=Or,We=function(r){a(e,r);function e(t,n){var i=r.call(this)||this;return i.subject=t,i.subscriber=n,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,!(!n||n.length===0||t.isStopped||t.closed)){var i=n.indexOf(this.subscriber);i!==-1&&n.splice(i,1)}}},e}(g),Me=function(r){a(e,r);function e(t){var n=r.call(this,t)||this;return n.destination=t,n}return e}(l),O=function(r){a(e,r);function e(){var t=r.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype[Ft]=function(){return new Me(this)},e.prototype.lift=function(t){var n=new xe(this,this);return n.operator=t,n},e.prototype.next=function(t){if(this.closed)throw new q;if(!this.isStopped)for(var n=this.observers,i=n.length,o=n.slice(),s=0;s<i;s++)o[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new q;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,i=n.length,o=n.slice(),s=0;s<i;s++)o[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new q;this.isStopped=!0;for(var t=this.observers,n=t.length,i=t.slice(),o=0;o<n;o++)i[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new q;return r.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new q;return this.hasError?(t.error(this.thrownError),g.EMPTY):this.isStopped?(t.complete(),g.EMPTY):(this.observers.push(t),new We(this,t))},e.prototype.asObservable=function(){var t=new y;return t.source=this,t},e.create=function(t,n){return new xe(t,n)},e}(y),xe=function(r){a(e,r);function e(t,n){var i=r.call(this)||this;return i.destination=t,i.source=n,i}return e.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},e.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var n=this.source;return n?this.source.subscribe(t):g.EMPTY},e}(O);function ee(){return function(e){return e.lift(new Ir(e))}}var Ir=function(){function r(e){this.connectable=e}return r.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var i=new Nr(e,n),o=t.subscribe(i);return i.closed||(i.connection=n.connect()),o},r}(),Nr=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.connectable=n,i}return e.prototype._unsubscribe=function(){var t=this.connectable;if(!t){this.connection=null;return}this.connectable=null;var n=t._refCount;if(n<=0){this.connection=null;return}if(t._refCount=n-1,n>1){this.connection=null;return}var i=this.connection,o=t._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},e}(l),De=function(r){a(e,r);function e(t,n){var i=r.call(this)||this;return i.source=t,i.subjectFactory=n,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,t=this._connection=new g,t.add(this.source.subscribe(new Vr(this.getSubject(),this))),t.closed&&(this._connection=null,t=g.EMPTY)),t},e.prototype.refCount=function(){return ee()(this)},e}(y),Ar=function(){var r=De.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}}(),Vr=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.connectable=n,i}return e.prototype._error=function(t){this._unsubscribe(),r.prototype._error.call(this,t)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}},e}(Me);function Pr(r,e,t,n){return function(i){return i.lift(new jr(r,e,t,n))}}var jr=function(){function r(e,t,n,i){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=i}return r.prototype.call=function(e,t){return t.subscribe(new kr(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},r}(),kr=function(r){a(e,r);function e(t,n,i,o,s){var u=r.call(this,t)||this;return u.keySelector=n,u.elementSelector=i,u.durationSelector=o,u.subjectSelector=s,u.groups=null,u.attemptedToUnsubscribe=!1,u.count=0,u}return e.prototype._next=function(t){var n;try{n=this.keySelector(t)}catch(i){this.error(i);return}this._group(t,n)},e.prototype._group=function(t,n){var i=this.groups;i||(i=this.groups=new Map);var o=i.get(n),s;if(this.elementSelector)try{s=this.elementSelector(t)}catch(f){this.error(f)}else s=t;if(!o){o=this.subjectSelector?this.subjectSelector():new O,i.set(n,o);var u=new Ht(n,o,this);if(this.destination.next(u),this.durationSelector){var c=void 0;try{c=this.durationSelector(new Ht(n,o))}catch(f){this.error(f);return}this.add(c.subscribe(new Rr(n,o,this)))}}o.closed||o.next(s)},e.prototype._error=function(t){var n=this.groups;n&&(n.forEach(function(i,o){i.error(t)}),n.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(n,i){n.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&r.prototype.unsubscribe.call(this))},e}(l),Rr=function(r){a(e,r);function e(t,n,i){var o=r.call(this,n)||this;return o.key=t,o.group=n,o.parent=i,o}return e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this,n=t.parent,i=t.key;this.key=this.parent=null,n&&n.removeGroup(i)},e}(l),Ht=function(r){a(e,r);function e(t,n,i){var o=r.call(this)||this;return o.key=t,o.groupSubject=n,o.refCountSubscription=i,o}return e.prototype._subscribe=function(t){var n=new g,i=this,o=i.refCountSubscription,s=i.groupSubject;return o&&!o.closed&&n.add(new Fr(o)),n.add(s.subscribe(t)),n},e}(y),Fr=function(r){a(e,r);function e(t){var n=r.call(this)||this;return n.parent=t,t.count++,n}return e.prototype.unsubscribe=function(){var t=this.parent;!t.closed&&!this.closed&&(r.prototype.unsubscribe.call(this),t.count-=1,t.count===0&&t.attemptedToUnsubscribe&&t.unsubscribe())},e}(g),Be=function(r){a(e,r);function e(t){var n=r.call(this)||this;return n._value=t,n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(t){var n=r.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new q;return this._value},e.prototype.next=function(t){r.prototype.next.call(this,this._value=t)},e}(O),Wr=function(r){a(e,r);function e(t,n){return r.call(this)||this}return e.prototype.schedule=function(t,n){return this},e}(g),St=function(r){a(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(t,n){if(n===void 0&&(n=0),this.closed)return this;this.state=t;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(o,this.id,n),this},e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return n;clearInterval(n)},e.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,n){var i=!1,o=void 0;try{this.work(t)}catch(s){i=!0,o=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var t=this.id,n=this.scheduler,i=n.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null},e}(Wr),Mr=function(r){a(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return e.prototype.schedule=function(t,n){return n===void 0&&(n=0),n>0?r.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},e.prototype.execute=function(t,n){return n>0||this.closed?r.prototype.execute.call(this,t,n):this._execute(t,n)},e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?r.prototype.requestAsyncId.call(this,t,n,i):t.flush(this)},e}(St),Qt=function(){function r(e,t){t===void 0&&(t=r.now),this.SchedulerAction=e,this.now=t}return r.prototype.schedule=function(e,t,n){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},r.now=function(){return Date.now()},r}(),gt=function(r){a(e,r);function e(t,n){n===void 0&&(n=Qt.now);var i=r.call(this,t,function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(t,n,i){return n===void 0&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(t,n,i):r.prototype.schedule.call(this,t,n,i)},e.prototype.flush=function(t){var n=this.actions;if(this.active){n.push(t);return}var i;this.active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this.active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}},e}(Qt),Dr=function(r){a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(gt),Ue=new Dr(Mr),ze=Ue,it=new y(function(r){return r.complete()});function ct(r){return r?Br(r):it}function Br(r){return new y(function(e){return r.schedule(function(){return e.complete()})})}function j(r){return r&&typeof r.schedule=="function"}var Le=function(r){return function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.complete()}};function re(r,e){return new y(function(t){var n=new g,i=0;return n.add(e.schedule(function(){if(i===r.length){t.complete();return}t.next(r[i++]),t.closed||n.add(this.schedule())})),n})}function xt(r,e){return e?re(r,e):new y(Le(r))}function Dt(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r[r.length-1];return j(t)?(r.pop(),re(r,t)):xt(r)}function ne(r,e){return e?new y(function(t){return e.schedule(Ur,0,{error:r,subscriber:t})}):new y(function(t){return t.error(r)})}function Ur(r){var e=r.error,t=r.subscriber;t.error(e)}var Zt;Zt||(Zt={});var D=function(){function r(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue=e==="N"}return r.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},r.prototype.do=function(e,t,n){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},r.prototype.accept=function(e,t,n){return e&&typeof e.next=="function"?this.observe(e):this.do(e,t,n)},r.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return Dt(this.value);case"E":return ne(this.error);case"C":return ct()}throw new Error("unexpected notification kind value")},r.createNext=function(e){return typeof e<"u"?new r("N",e):r.undefinedValueNotification},r.createError=function(e){return new r("E",void 0,e)},r.createComplete=function(){return r.completeNotification},r.completeNotification=new r("C"),r.undefinedValueNotification=new r("N",void 0),r}();function zr(r,e){return e===void 0&&(e=0),function(n){return n.lift(new Lr(r,e))}}var Lr=function(){function r(e,t){t===void 0&&(t=0),this.scheduler=e,this.delay=t}return r.prototype.call=function(e,t){return t.subscribe(new Ge(e,this.scheduler,this.delay))},r}(),Ge=function(r){a(e,r);function e(t,n,i){i===void 0&&(i=0);var o=r.call(this,t)||this;return o.scheduler=n,o.delay=i,o}return e.dispatch=function(t){var n=t.notification,i=t.destination;n.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){var n=this.destination;n.add(this.scheduler.schedule(e.dispatch,this.delay,new Gr(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(D.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(D.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(D.createComplete()),this.unsubscribe()},e}(l),Gr=function(){function r(e,t){this.notification=e,this.destination=t}return r}(),ie=function(r){a(e,r);function e(t,n,i){t===void 0&&(t=Number.POSITIVE_INFINITY),n===void 0&&(n=Number.POSITIVE_INFINITY);var o=r.call(this)||this;return o.scheduler=i,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=t<1?1:t,o._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return e.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}r.prototype.next.call(this,t)},e.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new qr(this._getNow(),t)),this._trimBufferThenGetEvents()),r.prototype.next.call(this,t)},e.prototype._subscribe=function(t){var n=this._infiniteTimeWindow,i=n?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,s=i.length,u;if(this.closed)throw new q;if(this.isStopped||this.hasError?u=g.EMPTY:(this.observers.push(t),u=new We(this,t)),o&&t.add(t=new Ge(t,o)),n)for(var c=0;c<s&&!t.closed;c++)t.next(i[c]);else for(var c=0;c<s&&!t.closed;c++)t.next(i[c].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),u},e.prototype._getNow=function(){return(this.scheduler||ze).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),n=this._bufferSize,i=this._windowTime,o=this._events,s=o.length,u=0;u<s&&!(t-o[u].time<i);)u++;return s>n&&(u=Math.max(u,s-n)),u>0&&o.splice(0,u),o},e}(O),qr=function(){function r(e,t){this.time=e,this.value=t}return r}(),at=function(r){a(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return e.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),g.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),g.EMPTY):r.prototype._subscribe.call(this,t)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(t){this.hasCompleted||r.prototype.error.call(this,t)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&r.prototype.next.call(this,this.value),r.prototype.complete.call(this)},e}(O),Yr=1,$r=function(){return Promise.resolve()}(),Kt={};function _e(r){return r in Kt?(delete Kt[r],!0):!1}var Ee={setImmediate:function(r){var e=Yr++;return Kt[e]=!0,$r.then(function(){return _e(e)&&r()}),e},clearImmediate:function(r){_e(r)}},Hr=function(r){a(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=Ee.setImmediate(t.flush.bind(t,null))))},e.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,t,n,i);t.actions.length===0&&(Ee.clearImmediate(n),t.scheduled=void 0)},e}(St),Qr=function(r){a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,s=n.length;t=t||n.shift();do if(i=t.execute(t.state,t.delay))break;while(++o<s&&(t=n.shift()));if(this.active=!1,i){for(;++o<s&&(t=n.shift());)t.unsubscribe();throw i}},e}(gt),qe=new Qr(Hr),kt=qe,Ye=new gt(St),V=Ye,Zr=function(r){a(e,r);function e(t,n){var i=r.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return e.prototype.requestAsyncId=function(t,n,i){return i===void 0&&(i=0),i!==null&&i>0?r.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},e.prototype.recycleAsyncId=function(t,n,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return r.prototype.recycleAsyncId.call(this,t,n,i);t.actions.length===0&&(cancelAnimationFrame(n),t.scheduled=void 0)},e}(St),Kr=function(r){a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var n=this.actions,i,o=-1,s=n.length;t=t||n.shift();do if(i=t.execute(t.state,t.delay))break;while(++o<s&&(t=n.shift()));if(this.active=!1,i){for(;++o<s&&(t=n.shift());)t.unsubscribe();throw i}},e}(gt),$e=new Kr(Zr),Jr=$e,Xr=function(r){a(e,r);function e(t,n){t===void 0&&(t=He),n===void 0&&(n=Number.POSITIVE_INFINITY);var i=r.call(this,t,function(){return i.frame})||this;return i.maxFrames=n,i.frame=0,i.index=-1,i}return e.prototype.flush=function(){for(var t=this,n=t.actions,i=t.maxFrames,o,s;(s=n[0])&&s.delay<=i&&(n.shift(),this.frame=s.delay,!(o=s.execute(s.state,s.delay))););if(o){for(;s=n.shift();)s.unsubscribe();throw o}},e.frameTimeFactor=10,e}(gt),He=function(r){a(e,r);function e(t,n,i){i===void 0&&(i=t.index+=1);var o=r.call(this,t,n)||this;return o.scheduler=t,o.work=n,o.index=i,o.active=!0,o.index=t.index=i,o}return e.prototype.schedule=function(t,n){if(n===void 0&&(n=0),!this.id)return r.prototype.schedule.call(this,t,n);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(t,n)},e.prototype.requestAsyncId=function(t,n,i){i===void 0&&(i=0),this.delay=t.frame+i;var o=t.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,n,i){},e.prototype._execute=function(t,n){if(this.active===!0)return r.prototype._execute.call(this,t,n)},e.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},e}(St);function W(){}function tn(r){return!!r&&(r instanceof y||typeof r.lift=="function"&&typeof r.subscribe=="function")}var en=function(){function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r}(),ot=en,rn=function(){function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r}(),_t=rn,nn=function(){function r(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return r.prototype=Object.create(Error.prototype),r}(),Qe=nn;function F(r,e){return function(n){if(typeof r!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new on(r,e))}}var on=function(){function r(e,t){this.project=e,this.thisArg=t}return r.prototype.call=function(e,t){return t.subscribe(new sn(e,this.project,this.thisArg))},r}(),sn=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.project=n,o.count=0,o.thisArg=i||o,o}return e.prototype._next=function(t){var n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(l);function Ze(r,e,t){if(e)if(j(e))t=e;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Ze(r,t).apply(void 0,n).pipe(F(function(o){return A(o)?e.apply(void 0,o):e(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=this,s,u={context:o,subject:s,callbackFunc:r,scheduler:t};return new y(function(c){if(t){var h={args:n,subscriber:c,params:u};return t.schedule(un,0,h)}else{if(!s){s=new at;var f=function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];s.next(p.length<=1?p[0]:p),s.complete()};try{r.apply(o,n.concat([f]))}catch(p){te(s)?s.error(p):console.warn(p)}}return s.subscribe(c)}})}}function un(r){var e=this,t=r.args,n=r.subscriber,i=r.params,o=i.callbackFunc,s=i.context,u=i.scheduler,c=i.subject;if(!c){c=i.subject=new at;var f=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var d=h.length<=1?h[0]:h;e.add(u.schedule(cn,0,{value:d,subject:c}))};try{o.apply(s,t.concat([f]))}catch(h){c.error(h)}}this.add(c.subscribe(n))}function cn(r){var e=r.value,t=r.subject;t.next(e),t.complete()}function Ke(r,e,t){if(e)if(j(e))t=e;else return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Ke(r,t).apply(void 0,n).pipe(F(function(o){return A(o)?e.apply(void 0,o):e(o)}))};return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={subject:void 0,args:n,callbackFunc:r,scheduler:t,context:this};return new y(function(s){var u=o.context,c=o.subject;if(t)return t.schedule(an,0,{params:o,subscriber:s,context:u});if(!c){c=o.subject=new at;var f=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var d=h.shift();if(d){c.error(d);return}c.next(h.length<=1?h[0]:h),c.complete()};try{r.apply(u,n.concat([f]))}catch(h){te(c)?c.error(h):console.warn(h)}}return c.subscribe(s)})}}function an(r){var e=this,t=r.params,n=r.subscriber,i=r.context,o=t.callbackFunc,s=t.args,u=t.scheduler,c=t.subject;if(!c){c=t.subject=new at;var f=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var d=h.shift();if(d)e.add(u.schedule(Te,0,{err:d,subject:c}));else{var I=h.length<=1?h[0]:h;e.add(u.schedule(fn,0,{value:I,subject:c}))}};try{o.apply(i,s.concat([f]))}catch(h){this.add(u.schedule(Te,0,{err:h,subject:c}))}}this.add(c.subscribe(n))}function fn(r){var e=r.value,t=r.subject;t.next(e),t.complete()}function Te(r){var e=r.err,t=r.subject;t.error(e)}var et=function(r){a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.notifyNext=function(t,n,i,o,s){this.destination.next(n)},e.prototype.notifyError=function(t,n){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(l),hn=function(r){a(e,r);function e(t,n,i){var o=r.call(this)||this;return o.parent=t,o.outerValue=n,o.outerIndex=i,o.index=0,o}return e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(l),ln=function(r){return function(e){return r.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,rt),e}};function pn(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var H=pn(),dn=function(r){return function(e){var t=r[H]();do{var n=void 0;try{n=t.next()}catch(i){return e.error(i),e}if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}while(!0);return typeof t.return=="function"&&e.add(function(){t.return&&t.return()}),e}},bn=function(r){return function(e){var t=r[ut]();if(typeof t.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}},Je=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function Xe(r){return!!r&&typeof r.subscribe!="function"&&typeof r.then=="function"}var yt=function(r){if(r&&typeof r[ut]=="function")return bn(r);if(Je(r))return Le(r);if(Xe(r))return ln(r);if(r&&typeof r[H]=="function")return dn(r);var e=Xt(r)?"an invalid object":"'"+r+"'",t="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(t)};function B(r,e,t,n,i){if(i===void 0&&(i=new hn(r,t,n)),!i.closed)return e instanceof y?e.subscribe(i):yt(e)(i)}var Ce={};function vn(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=void 0,n=void 0;return j(r[r.length-1])&&(n=r.pop()),typeof r[r.length-1]=="function"&&(t=r.pop()),r.length===1&&A(r[0])&&(r=r[0]),xt(r,n).lift(new oe(t))}var oe=function(){function r(e){this.resultSelector=e}return r.prototype.call=function(e,t){return t.subscribe(new yn(e,this.resultSelector))},r}(),yn=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.resultSelector=n,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(t){this.values.push(Ce),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,n=t.length;if(n===0)this.destination.complete();else{this.active=n,this.toRespond=n;for(var i=0;i<n;i++){var o=t[i];this.add(B(this,o,void 0,i))}}},e.prototype.notifyComplete=function(t){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(t,n,i){var o=this.values,s=o[i],u=this.toRespond?s===Ce?--this.toRespond:this.toRespond:0;o[i]=n,u===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var n;try{n=this.resultSelector.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(et);function mn(r,e){return new y(function(t){var n=new g;return n.add(e.schedule(function(){var i=r[ut]();n.add(i.subscribe({next:function(o){n.add(e.schedule(function(){return t.next(o)}))},error:function(o){n.add(e.schedule(function(){return t.error(o)}))},complete:function(){n.add(e.schedule(function(){return t.complete()}))}}))})),n})}function wn(r,e){return new y(function(t){var n=new g;return n.add(e.schedule(function(){return r.then(function(i){n.add(e.schedule(function(){t.next(i),n.add(e.schedule(function(){return t.complete()}))}))},function(i){n.add(e.schedule(function(){return t.error(i)}))})})),n})}function Sn(r,e){if(!r)throw new Error("Iterable cannot be null");return new y(function(t){var n=new g,i;return n.add(function(){i&&typeof i.return=="function"&&i.return()}),n.add(e.schedule(function(){i=r[H](),n.add(e.schedule(function(){if(!t.closed){var o,s;try{var u=i.next();o=u.value,s=u.done}catch(c){t.error(c);return}s?t.complete():(t.next(o),this.schedule())}}))})),n})}function gn(r){return r&&typeof r[ut]=="function"}function xn(r){return r&&typeof r[H]=="function"}function tr(r,e){if(r!=null){if(gn(r))return mn(r,e);if(Xe(r))return wn(r,e);if(Je(r))return re(r,e);if(xn(r)||typeof r=="string")return Sn(r,e)}throw new TypeError((r!==null&&typeof r||r)+" is not observable")}function U(r,e){return e?tr(r,e):r instanceof y?r:new y(yt(r))}var x=function(r){a(e,r);function e(t){var n=r.call(this)||this;return n.parent=t,n}return e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(l),_=function(r){a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(l);function E(r,e){if(!e.closed){if(r instanceof y)return r.subscribe(e);var t;try{t=yt(r)(e)}catch(n){e.error(n)}return t}}function X(r,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),typeof e=="function"?function(n){return n.pipe(X(function(i,o){return U(r(i,o)).pipe(F(function(s,u){return e(i,s,o,u)}))},t))}:(typeof e=="number"&&(t=e),function(n){return n.lift(new _n(r,t))})}var _n=function(){function r(e,t){t===void 0&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return r.prototype.call=function(e,t){return t.subscribe(new En(e,this.project,this.concurrent))},r}(),En=function(r){a(e,r);function e(t,n,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var o=r.call(this,t)||this;return o.project=n,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var n,i=this.index++;try{n=this.project(t,i)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(n)},e.prototype._innerSub=function(t){var n=new x(this),i=this.destination;i.add(n);var o=E(t,n);o!==n&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(_),Tn=X;function se(r){return r===void 0&&(r=Number.POSITIVE_INFINITY),X($,r)}function er(){return se(1)}function mt(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return er()(Dt.apply(void 0,r))}function ue(r){return new y(function(e){var t;try{t=r()}catch(i){e.error(i);return}var n=t?U(t):ct();return n.subscribe(e)})}function Cn(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r.length===1){var t=r[0];if(A(t))return At(t,null);if(Xt(t)&&Object.getPrototypeOf(t)===Object.prototype){var n=Object.keys(t);return At(n.map(function(o){return t[o]}),n)}}if(typeof r[r.length-1]=="function"){var i=r.pop();return r=r.length===1&&A(r[0])?r[0]:r,At(r,null).pipe(F(function(o){return i.apply(void 0,o)}))}return At(r,null)}function At(r,e){return new y(function(t){var n=r.length;if(n===0){t.complete();return}for(var i=new Array(n),o=0,s=0,u=function(f){var h=U(r[f]),p=!1;t.add(h.subscribe({next:function(d){p||(p=!0,s++),i[f]=d},error:function(d){return t.error(d)},complete:function(){o++,(o===n||!p)&&(s===n&&t.next(e?e.reduce(function(d,I,N){return d[I]=i[N],d},{}):i),t.complete())}}))},c=0;c<n;c++)u(c)})}function rr(r,e,t,n){return nt(t)&&(n=t,t=void 0),n?rr(r,e,t).pipe(F(function(i){return A(i)?n.apply(void 0,i):n(i)})):new y(function(i){function o(s){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(s)}nr(r,e,o,i,t)})}function nr(r,e,t,n,i){var o;if(Nn(r)){var s=r;r.addEventListener(e,t,i),o=function(){return s.removeEventListener(e,t,i)}}else if(In(r)){var u=r;r.on(e,t),o=function(){return u.off(e,t)}}else if(On(r)){var c=r;r.addListener(e,t),o=function(){return c.removeListener(e,t)}}else if(r&&r.length)for(var f=0,h=r.length;f<h;f++)nr(r[f],e,t,n,i);else throw new TypeError("Invalid event target");n.add(o)}function On(r){return r&&typeof r.addListener=="function"&&typeof r.removeListener=="function"}function In(r){return r&&typeof r.on=="function"&&typeof r.off=="function"}function Nn(r){return r&&typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}function ir(r,e,t){return t?ir(r,e).pipe(F(function(n){return A(n)?t.apply(void 0,n):t(n)})):new y(function(n){var i=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return n.next(s.length===1?s[0]:s)},o;try{o=r(i)}catch(s){n.error(s);return}if(nt(e))return function(){return e(i,o)}})}function An(r,e,t,n,i){var o,s;if(arguments.length==1){var u=r;s=u.initialState,e=u.condition,t=u.iterate,o=u.resultSelector||$,i=u.scheduler}else n===void 0||j(n)?(s=r,o=$,i=n):(s=r,o=n);return new y(function(c){var f=s;if(i)return i.schedule(Vn,0,{subscriber:c,iterate:t,condition:e,resultSelector:o,state:f});do{if(e){var h=void 0;try{h=e(f)}catch(d){c.error(d);return}if(!h){c.complete();break}}var p=void 0;try{p=o(f)}catch(d){c.error(d);return}if(c.next(p),c.closed)break;try{f=t(f)}catch(d){c.error(d);return}}while(!0)})}function Vn(r){var e=r.subscriber,t=r.condition;if(!e.closed){if(r.needIterate)try{r.state=r.iterate(r.state)}catch(o){e.error(o);return}else r.needIterate=!0;if(t){var n=void 0;try{n=t(r.state)}catch(o){e.error(o);return}if(!n){e.complete();return}if(e.closed)return}var i;try{i=r.resultSelector(r.state)}catch(o){e.error(o);return}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(r)}}function Pn(r,e,t){return e===void 0&&(e=it),t===void 0&&(t=it),ue(function(){return r()?e:t})}function st(r){return!A(r)&&r-parseFloat(r)+1>=0}function jn(r,e){return r===void 0&&(r=0),e===void 0&&(e=V),(!st(r)||r<0)&&(r=0),(!e||typeof e.schedule!="function")&&(e=V),new y(function(t){return t.add(e.schedule(kn,r,{subscriber:t,counter:0,period:r})),t})}function kn(r){var e=r.subscriber,t=r.counter,n=r.period;e.next(t),this.schedule({subscriber:e,counter:t+1,period:n},n)}function or(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Number.POSITIVE_INFINITY,n=null,i=r[r.length-1];return j(i)?(n=r.pop(),r.length>1&&typeof r[r.length-1]=="number"&&(t=r.pop())):typeof i=="number"&&(t=r.pop()),n===null&&r.length===1&&r[0]instanceof y?r[0]:se(t)(xt(r,n))}var sr=new y(W);function Rn(){return sr}function Jt(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r.length===0)return it;var t=r[0],n=r.slice(1);return r.length===1&&A(t)?Jt.apply(void 0,t):new y(function(i){var o=function(){return i.add(Jt.apply(void 0,n).subscribe(i))};return U(t).subscribe({next:function(s){i.next(s)},error:o,complete:o})})}function Fn(r,e){return e?new y(function(t){var n=Object.keys(r),i=new g;return i.add(e.schedule(Wn,0,{keys:n,index:0,subscriber:t,subscription:i,obj:r})),i}):new y(function(t){for(var n=Object.keys(r),i=0;i<n.length&&!t.closed;i++){var o=n[i];r.hasOwnProperty(o)&&t.next([o,r[o]])}t.complete()})}function Wn(r){var e=r.keys,t=r.index,n=r.subscriber,i=r.subscription,o=r.obj;if(!n.closed)if(t<e.length){var s=e[t];n.next([s,o[s]]),i.add(this.schedule({keys:e,index:t+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}function ur(r,e){function t(){return!t.pred.apply(t.thisArg,arguments)}return t.pred=r,t.thisArg=e,t}function Q(r,e){return function(n){return n.lift(new Mn(r,e))}}var Mn=function(){function r(e,t){this.predicate=e,this.thisArg=t}return r.prototype.call=function(e,t){return t.subscribe(new Dn(e,this.predicate,this.thisArg))},r}(),Dn=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.predicate=n,o.thisArg=i,o.count=0,o}return e.prototype._next=function(t){var n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}n&&this.destination.next(t)},e}(l);function Bn(r,e,t){return[Q(e,t)(new y(yt(r))),Q(ur(e,t))(new y(yt(r)))]}function cr(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r.length===1)if(A(r[0]))r=r[0];else return r[0];return xt(r,void 0).lift(new Un)}var Un=function(){function r(){}return r.prototype.call=function(e,t){return t.subscribe(new zn(e))},r}(),zn=function(r){a(e,r);function e(t){var n=r.call(this,t)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,n=t.length;if(n===0)this.destination.complete();else{for(var i=0;i<n&&!this.hasFirst;i++){var o=t[i],s=B(this,o,void 0,i);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}},e.prototype.notifyNext=function(t,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==i){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(n)},e}(et);function Ln(r,e,t){return r===void 0&&(r=0),new y(function(n){e===void 0&&(e=r,r=0);var i=0,o=r;if(t)return t.schedule(Gn,0,{index:i,count:e,start:r,subscriber:n});do{if(i++>=e){n.complete();break}if(n.next(o++),n.closed)break}while(!0)})}function Gn(r){var e=r.start,t=r.index,n=r.count,i=r.subscriber;if(t>=n){i.complete();return}i.next(e),!i.closed&&(r.index=t+1,r.start=e+1,this.schedule(r))}function ar(r,e,t){r===void 0&&(r=0);var n=-1;return st(e)?n=Number(e)<1&&1||Number(e):j(e)&&(t=e),j(t)||(t=V),new y(function(i){var o=st(r)?r:+r-t.now();return t.schedule(qn,o,{index:0,period:n,subscriber:i})})}function qn(r){var e=r.index,t=r.period,n=r.subscriber;if(n.next(e),!n.closed){if(t===-1)return n.complete();r.index=e+1,this.schedule(r,t)}}function Yn(r,e){return new y(function(t){var n;try{n=r()}catch(u){t.error(u);return}var i;try{i=e(n)}catch(u){t.error(u);return}var o=i?U(i):it,s=o.subscribe(t);return function(){s.unsubscribe(),n&&n.unsubscribe()}})}function fr(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r[r.length-1];return typeof t=="function"&&r.pop(),xt(r,void 0).lift(new hr(t))}var hr=function(){function r(e){this.resultSelector=e}return r.prototype.call=function(e,t){return t.subscribe(new $n(e,this.resultSelector))},r}(),$n=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.resultSelector=n,o.iterators=[],o.active=0,o.resultSelector=typeof n=="function"?n:void 0,o}return e.prototype._next=function(t){var n=this.iterators;A(t)?n.push(new Qn(t)):typeof t[H]=="function"?n.push(new Hn(t[H]())):n.push(new Zn(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,n=t.length;if(this.unsubscribe(),n===0){this.destination.complete();return}this.active=n;for(var i=0;i<n;i++){var o=t[i];if(o.stillUnsubscribed){var s=this.destination;s.add(o.subscribe())}else this.active--}},e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,n=t.length,i=this.destination,o=0;o<n;o++){var s=t[o];if(typeof s.hasValue=="function"&&!s.hasValue())return}for(var u=!1,c=[],o=0;o<n;o++){var s=t[o],f=s.next();if(s.hasCompleted()&&(u=!0),f.done){i.complete();return}c.push(f.value)}this.resultSelector?this._tryresultSelector(c):i.next(c),u&&i.complete()},e.prototype._tryresultSelector=function(t){var n;try{n=this.resultSelector.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(l),Hn=function(){function r(e){this.iterator=e,this.nextResult=e.next()}return r.prototype.hasValue=function(){return!0},r.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},r.prototype.hasCompleted=function(){var e=this.nextResult;return!!(e&&e.done)},r}(),Qn=function(){function r(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return r.prototype[H]=function(){return this},r.prototype.next=function(e){var t=this.index++,n=this.array;return t<this.length?{value:n[t],done:!1}:{value:null,done:!0}},r.prototype.hasValue=function(){return this.array.length>this.index},r.prototype.hasCompleted=function(){return this.array.length===this.index},r}(),Zn=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.parent=n,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return e.prototype[H]=function(){return this},e.prototype.next=function(){var t=this.buffer;return t.length===0&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t){this.buffer.push(t),this.parent.checkIterators()},e.prototype.subscribe=function(){return E(this.observable,new x(this))},e}(_);const Kn=Object.freeze(Object.defineProperty({__proto__:null,ArgumentOutOfRangeError:ot,AsyncSubject:at,BehaviorSubject:Be,ConnectableObservable:De,EMPTY:it,EmptyError:_t,GroupedObservable:Ht,NEVER:sr,Notification:D,get NotificationKind(){return Zt},ObjectUnsubscribedError:q,Observable:y,ReplaySubject:ie,Scheduler:Qt,Subject:O,Subscriber:l,Subscription:g,TimeoutError:Qe,UnsubscriptionError:vt,VirtualAction:He,VirtualTimeScheduler:Xr,animationFrame:Jr,animationFrameScheduler:$e,asap:kt,asapScheduler:qe,async:V,asyncScheduler:Ye,bindCallback:Ze,bindNodeCallback:Ke,combineLatest:vn,concat:mt,config:R,defer:ue,empty:ct,forkJoin:Cn,from:U,fromEvent:rr,fromEventPattern:ir,generate:An,identity:$,iif:Pn,interval:jn,isObservable:tn,merge:or,never:Rn,noop:W,observable:ut,of:Dt,onErrorResumeNext:Jt,pairs:Fn,partition:Bn,pipe:$t,queue:ze,queueScheduler:Ue,race:cr,range:Ln,scheduled:tr,throwError:ne,timer:ar,using:Yn,zip:fr},Symbol.toStringTag,{value:"Module"})),Bt=Re(Kn);function lr(r){return function(t){return t.lift(new Jn(r))}}var Jn=function(){function r(e){this.durationSelector=e}return r.prototype.call=function(e,t){return t.subscribe(new Xn(e,this.durationSelector))},r}(),Xn=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.durationSelector=n,i.hasValue=!1,i}return e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var n=void 0;try{var i=this.durationSelector;n=i(t)}catch(s){return this.destination.error(s)}var o=E(n,new x(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}},e.prototype.clearThrottle=function(){var t=this,n=t.value,i=t.hasValue,o=t.throttled;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(n))},e.prototype.notifyNext=function(){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(_);function ti(r,e){return e===void 0&&(e=V),lr(function(){return ar(r,e)})}function ei(r){return function(t){return t.lift(new ri(r))}}var ri=function(){function r(e){this.closingNotifier=e}return r.prototype.call=function(e,t){return t.subscribe(new ni(e,this.closingNotifier))},r}(),ni=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.buffer=[],i.add(E(n,new x(i))),i}return e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(){var t=this.buffer;this.buffer=[],this.destination.next(t)},e}(_);function ii(r,e){return e===void 0&&(e=null),function(n){return n.lift(new oi(r,e))}}var oi=function(){function r(e,t){this.bufferSize=e,this.startBufferEvery=t,!t||e===t?this.subscriberClass=si:this.subscriberClass=ui}return r.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},r}(),si=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.bufferSize=n,i.buffer=[],i}return e.prototype._next=function(t){var n=this.buffer;n.push(t),n.length==this.bufferSize&&(this.destination.next(n),this.buffer=[])},e.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),r.prototype._complete.call(this)},e}(l),ui=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.bufferSize=n,o.startBufferEvery=i,o.buffers=[],o.count=0,o}return e.prototype._next=function(t){var n=this,i=n.bufferSize,o=n.startBufferEvery,s=n.buffers,u=n.count;this.count++,u%o===0&&s.push([]);for(var c=s.length;c--;){var f=s[c];f.push(t),f.length===i&&(s.splice(c,1),this.destination.next(f))}},e.prototype._complete=function(){for(var t=this,n=t.buffers,i=t.destination;n.length>0;){var o=n.shift();o.length>0&&i.next(o)}r.prototype._complete.call(this)},e}(l);function ci(r){var e=arguments.length,t=V;j(arguments[arguments.length-1])&&(t=arguments[arguments.length-1],e--);var n=null;e>=2&&(n=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(s){return s.lift(new ai(r,n,i,t))}}var ai=function(){function r(e,t,n,i){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=i}return r.prototype.call=function(e,t){return t.subscribe(new hi(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},r}(),fi=function(){function r(){this.buffer=[]}return r}(),hi=function(r){a(e,r);function e(t,n,i,o,s){var u=r.call(this,t)||this;u.bufferTimeSpan=n,u.bufferCreationInterval=i,u.maxBufferSize=o,u.scheduler=s,u.contexts=[];var c=u.openContext();if(u.timespanOnly=i==null||i<0,u.timespanOnly){var f={subscriber:u,context:c,bufferTimeSpan:n};u.add(c.closeAction=s.schedule(Oe,n,f))}else{var h={subscriber:u,context:c},p={bufferTimeSpan:n,bufferCreationInterval:i,subscriber:u,scheduler:s};u.add(c.closeAction=s.schedule(pr,n,h)),u.add(s.schedule(li,i,p))}return u}return e.prototype._next=function(t){for(var n=this.contexts,i=n.length,o,s=0;s<i;s++){var u=n[s],c=u.buffer;c.push(t),c.length==this.maxBufferSize&&(o=u)}o&&this.onBufferFull(o)},e.prototype._error=function(t){this.contexts.length=0,r.prototype._error.call(this,t)},e.prototype._complete=function(){for(var t=this,n=t.contexts,i=t.destination;n.length>0;){var o=n.shift();i.next(o.buffer)}r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var n=t.closeAction;if(n.unsubscribe(),this.remove(n),!this.closed&&this.timespanOnly){t=this.openContext();var i=this.bufferTimeSpan,o={subscriber:this,context:t,bufferTimeSpan:i};this.add(t.closeAction=this.scheduler.schedule(Oe,i,o))}},e.prototype.openContext=function(){var t=new fi;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var n=this.contexts,i=n?n.indexOf(t):-1;i>=0&&n.splice(n.indexOf(t),1)},e}(l);function Oe(r){var e=r.subscriber,t=r.context;t&&e.closeContext(t),e.closed||(r.context=e.openContext(),r.context.closeAction=this.schedule(r,r.bufferTimeSpan))}function li(r){var e=r.bufferCreationInterval,t=r.bufferTimeSpan,n=r.subscriber,i=r.scheduler,o=n.openContext(),s=this;n.closed||(n.add(o.closeAction=i.schedule(pr,t,{subscriber:n,context:o})),s.schedule(r,e))}function pr(r){var e=r.subscriber,t=r.context;e.closeContext(t)}function pi(r,e){return function(n){return n.lift(new di(r,e))}}var di=function(){function r(e,t){this.openings=e,this.closingSelector=t}return r.prototype.call=function(e,t){return t.subscribe(new bi(e,this.openings,this.closingSelector))},r}(),bi=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.closingSelector=i,o.contexts=[],o.add(B(o,n)),o}return e.prototype._next=function(t){for(var n=this.contexts,i=n.length,o=0;o<i;o++)n[o].buffer.push(t)},e.prototype._error=function(t){for(var n=this.contexts;n.length>0;){var i=n.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,r.prototype._error.call(this,t)},e.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var n=t.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,r.prototype._complete.call(this)},e.prototype.notifyNext=function(t,n){t?this.closeBuffer(t):this.openBuffer(n)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var n=this.closingSelector,i=n.call(this,t);i&&this.trySubscribe(i)}catch(o){this._error(o)}},e.prototype.closeBuffer=function(t){var n=this.contexts;if(n&&t){var i=t.buffer,o=t.subscription;this.destination.next(i),n.splice(n.indexOf(t),1),this.remove(o),o.unsubscribe()}},e.prototype.trySubscribe=function(t){var n=this.contexts,i=[],o=new g,s={buffer:i,subscription:o};n.push(s);var u=B(this,t,s);!u||u.closed?this.closeBuffer(s):(u.context=s,this.add(u),o.add(u))},e}(et);function vi(r){return function(e){return e.lift(new yi(r))}}var yi=function(){function r(e){this.closingSelector=e}return r.prototype.call=function(e,t){return t.subscribe(new mi(e,this.closingSelector))},r}(),mi=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.closingSelector=n,i.subscribing=!1,i.openBuffer(),i}return e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},e.prototype.notifyNext=function(){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];var i;try{var o=this.closingSelector;i=o()}catch(s){return this.error(s)}t=new g,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(E(i,new x(this))),this.subscribing=!1},e}(_);function wi(r){return function(t){var n=new Si(r),i=t.lift(n);return n.caught=i}}var Si=function(){function r(e){this.selector=e}return r.prototype.call=function(e,t){return t.subscribe(new gi(e,this.selector,this.caught))},r}(),gi=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.selector=n,o.caught=i,o}return e.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(s){r.prototype.error.call(this,s);return}this._unsubscribeAndRecycle();var i=new x(this);this.add(i);var o=E(n,i);o!==i&&this.add(o)}},e}(_);function xi(r){return function(e){return e.lift(new oe(r))}}function _i(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=null;return typeof r[r.length-1]=="function"&&(t=r.pop()),r.length===1&&A(r[0])&&(r=r[0].slice()),function(n){return n.lift.call(U([n].concat(r)),new oe(t))}}function Ei(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return t.lift.call(mt.apply(void 0,[t].concat(r)))}}function dr(r,e){return X(r,e,1)}function Ti(r,e){return dr(function(){return r},e)}function Ci(r){return function(e){return e.lift(new Oi(r,e))}}var Oi=function(){function r(e,t){this.predicate=e,this.source=t}return r.prototype.call=function(e,t){return t.subscribe(new Ii(e,this.predicate,this.source))},r}(),Ii=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.predicate=n,o.source=i,o.count=0,o.index=0,o}return e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var n;try{n=this.predicate(t,this.index++,this.source)}catch(i){this.destination.error(i);return}n&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(l);function Ni(r){return function(e){return e.lift(new Ai(r))}}var Ai=function(){function r(e){this.durationSelector=e}return r.prototype.call=function(e,t){return t.subscribe(new Vi(e,this.durationSelector))},r}(),Vi=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.durationSelector=n,i.hasValue=!1,i}return e.prototype._next=function(t){try{var n=this.durationSelector.call(this,t);n&&this._tryNext(t,n)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,n){var i=this.durationSubscription;this.value=t,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=E(n,new x(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var t=this.value,n=this.durationSubscription;n&&(this.durationSubscription=void 0,n.unsubscribe(),this.remove(n)),this.value=void 0,this.hasValue=!1,r.prototype._next.call(this,t)}},e}(_);function Pi(r,e){return e===void 0&&(e=V),function(t){return t.lift(new ji(r,e))}}var ji=function(){function r(e,t){this.dueTime=e,this.scheduler=t}return r.prototype.call=function(e,t){return t.subscribe(new ki(e,this.dueTime,this.scheduler))},r}(),ki=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.dueTime=n,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Ri,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;t!==null&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(l);function Ri(r){r.debouncedNext()}function Et(r){return r===void 0&&(r=null),function(e){return e.lift(new Fi(r))}}var Fi=function(){function r(e){this.defaultValue=e}return r.prototype.call=function(e,t){return t.subscribe(new Wi(e,this.defaultValue))},r}(),Wi=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.defaultValue=n,i.isEmpty=!0,i}return e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(l);function br(r){return r instanceof Date&&!isNaN(+r)}function Mi(r,e){e===void 0&&(e=V);var t=br(r),n=t?+r-e.now():Math.abs(r);return function(i){return i.lift(new Di(n,e))}}var Di=function(){function r(e,t){this.delay=e,this.scheduler=t}return r.prototype.call=function(e,t){return t.subscribe(new Bi(e,this.delay,this.scheduler))},r}(),Bi=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.delay=n,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return e.dispatch=function(t){for(var n=t.source,i=n.queue,o=t.scheduler,s=t.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(s);if(i.length>0){var u=Math.max(0,i[0].time-o.now());this.schedule(t,u)}else this.unsubscribe(),n.active=!1},e.prototype._schedule=function(t){this.active=!0;var n=this.destination;n.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(this.errored!==!0){var n=this.scheduler,i=new Ui(n.now()+this.delay,t);this.queue.push(i),this.active===!1&&this._schedule(n)}},e.prototype._next=function(t){this.scheduleNotification(D.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(D.createComplete()),this.unsubscribe()},e}(l),Ui=function(){function r(e,t){this.time=e,this.notification=t}return r}();function zi(r,e){return e?function(t){return new Gi(t,e).lift(new Ie(r))}:function(t){return t.lift(new Ie(r))}}var Ie=function(){function r(e){this.delayDurationSelector=e}return r.prototype.call=function(e,t){return t.subscribe(new Li(e,this.delayDurationSelector))},r}(),Li=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.delayDurationSelector=n,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return e.prototype.notifyNext=function(t,n,i,o,s){this.destination.next(t),this.removeSubscription(s),this.tryComplete()},e.prototype.notifyError=function(t,n){this._error(t)},e.prototype.notifyComplete=function(t){var n=this.removeSubscription(t);n&&this.destination.next(n),this.tryComplete()},e.prototype._next=function(t){var n=this.index++;try{var i=this.delayDurationSelector(t,n);i&&this.tryDelay(i,t)}catch(o){this.destination.error(o)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var n=this.delayNotifierSubscriptions.indexOf(t);return n!==-1&&this.delayNotifierSubscriptions.splice(n,1),t.outerValue},e.prototype.tryDelay=function(t,n){var i=B(this,t,n);if(i&&!i.closed){var o=this.destination;o.add(i),this.delayNotifierSubscriptions.push(i)}},e.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},e}(et),Gi=function(r){a(e,r);function e(t,n){var i=r.call(this)||this;return i.source=t,i.subscriptionDelay=n,i}return e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new qi(t,this.source))},e}(y),qi=function(r){a(e,r);function e(t,n){var i=r.call(this)||this;return i.parent=t,i.source=n,i.sourceSubscribed=!1,i}return e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(l);function Yi(){return function(e){return e.lift(new $i)}}var $i=function(){function r(){}return r.prototype.call=function(e,t){return t.subscribe(new Hi(e))},r}(),Hi=function(r){a(e,r);function e(t){return r.call(this,t)||this}return e.prototype._next=function(t){t.observe(this.destination)},e}(l);function Qi(r,e){return function(t){return t.lift(new Zi(r,e))}}var Zi=function(){function r(e,t){this.keySelector=e,this.flushes=t}return r.prototype.call=function(e,t){return t.subscribe(new Ki(e,this.keySelector,this.flushes))},r}(),Ki=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.keySelector=n,o.values=new Set,i&&o.add(E(i,new x(o))),o}return e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(t){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var n,i=this.destination;try{n=this.keySelector(t)}catch(o){i.error(o);return}this._finalizeNext(n,t)},e.prototype._finalizeNext=function(t,n){var i=this.values;i.has(t)||(i.add(t),this.destination.next(n))},e}(_);function vr(r,e){return function(t){return t.lift(new Ji(r,e))}}var Ji=function(){function r(e,t){this.compare=e,this.keySelector=t}return r.prototype.call=function(e,t){return t.subscribe(new Xi(e,this.compare,this.keySelector))},r}(),Xi=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.keySelector=i,o.hasKey=!1,typeof n=="function"&&(o.compare=n),o}return e.prototype.compare=function(t,n){return t===n},e.prototype._next=function(t){var n;try{var i=this.keySelector;n=i?i(t):t}catch(u){return this.destination.error(u)}var o=!1;if(this.hasKey)try{var s=this.compare;o=s(this.key,n)}catch(u){return this.destination.error(u)}else this.hasKey=!0;o||(this.key=n,this.destination.next(t))},e}(l);function to(r,e){return vr(function(t,n){return e?e(t[r],n[r]):t[r]===n[r]})}function Ut(r){return r===void 0&&(r=no),function(e){return e.lift(new eo(r))}}var eo=function(){function r(e){this.errorFactory=e}return r.prototype.call=function(e,t){return t.subscribe(new ro(e,this.errorFactory))},r}(),ro=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.errorFactory=n,i.hasValue=!1,i}return e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)},e}(l);function no(){return new _t}function ce(r){return function(e){return r===0?ct():e.lift(new io(r))}}var io=function(){function r(e){if(this.total=e,this.total<0)throw new ot}return r.prototype.call=function(e,t){return t.subscribe(new oo(e,this.total))},r}(),oo=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(t){var n=this.total,i=++this.count;i<=n&&(this.destination.next(t),i===n&&(this.destination.complete(),this.unsubscribe()))},e}(l);function so(r,e){if(r<0)throw new ot;var t=arguments.length>=2;return function(n){return n.pipe(Q(function(i,o){return o===r}),ce(1),t?Et(e):Ut(function(){return new ot}))}}function uo(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return mt(t,Dt.apply(void 0,r))}}function co(r,e){return function(t){return t.lift(new ao(r,e,t))}}var ao=function(){function r(e,t,n){this.predicate=e,this.thisArg=t,this.source=n}return r.prototype.call=function(e,t){return t.subscribe(new fo(e,this.predicate,this.thisArg,this.source))},r}(),fo=function(r){a(e,r);function e(t,n,i,o){var s=r.call(this,t)||this;return s.predicate=n,s.thisArg=i,s.source=o,s.index=0,s.thisArg=i||s,s}return e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var n=!1;try{n=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(i){this.destination.error(i);return}n||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(l);function ho(){return function(r){return r.lift(new lo)}}var lo=function(){function r(){}return r.prototype.call=function(e,t){return t.subscribe(new po(e))},r}(),po=function(r){a(e,r);function e(t){var n=r.call(this,t)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(E(t,new x(this))))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(_);function yr(r,e){return e?function(t){return t.pipe(yr(function(n,i){return U(r(n,i)).pipe(F(function(o,s){return e(n,o,i,s)}))}))}:function(t){return t.lift(new bo(r))}}var bo=function(){function r(e){this.project=e}return r.prototype.call=function(e,t){return t.subscribe(new vo(e,this.project))},r}(),vo=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.project=n,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var n,i=this.index++;try{n=this.project(t,i)}catch(o){this.destination.error(o);return}this.hasSubscription=!0,this._innerSub(n)},e.prototype._innerSub=function(t){var n=new x(this),i=this.destination;i.add(n);var o=E(t,n);o!==n&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(_);function yo(r,e,t){return e===void 0&&(e=Number.POSITIVE_INFINITY),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(n){return n.lift(new mo(r,e,t))}}var mo=function(){function r(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}return r.prototype.call=function(e,t){return t.subscribe(new wo(e,this.project,this.concurrent,this.scheduler))},r}(),wo=function(r){a(e,r);function e(t,n,i,o){var s=r.call(this,t)||this;return s.project=n,s.concurrent=i,s.scheduler=o,s.index=0,s.active=0,s.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(s.buffer=[]),s}return e.dispatch=function(t){var n=t.subscriber,i=t.result,o=t.value,s=t.index;n.subscribeToProjection(i,o,s)},e.prototype._next=function(t){var n=this.destination;if(n.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){n.next(t);try{var o=this.project,s=o(t,i);if(!this.scheduler)this.subscribeToProjection(s,t,i);else{var u={subscriber:this,result:s,value:t,index:i},c=this.destination;c.add(this.scheduler.schedule(e.dispatch,0,u))}}catch(f){n.error(f)}}else this.buffer.push(t)},e.prototype.subscribeToProjection=function(t,n,i){this.active++;var o=this.destination;o.add(E(t,new x(this)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this._next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},e}(_);function So(r){return function(e){return e.lift(new go(r))}}var go=function(){function r(e){this.callback=e}return r.prototype.call=function(e,t){return t.subscribe(new xo(e,this.callback))},r}(),xo=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.add(new g(n)),i}return e}(l);function _o(r,e){if(typeof r!="function")throw new TypeError("predicate is not a function");return function(t){return t.lift(new mr(r,t,!1,e))}}var mr=function(){function r(e,t,n,i){this.predicate=e,this.source=t,this.yieldIndex=n,this.thisArg=i}return r.prototype.call=function(e,t){return t.subscribe(new Eo(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},r}(),Eo=function(r){a(e,r);function e(t,n,i,o,s){var u=r.call(this,t)||this;return u.predicate=n,u.source=i,u.yieldIndex=o,u.thisArg=s,u.index=0,u}return e.prototype.notifyComplete=function(t){var n=this.destination;n.next(t),n.complete(),this.unsubscribe()},e.prototype._next=function(t){var n=this,i=n.predicate,o=n.thisArg,s=this.index++;try{var u=i.call(o||this,t,s,this.source);u&&this.notifyComplete(this.yieldIndex?s:t)}catch(c){this.destination.error(c)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(l);function To(r,e){return function(t){return t.lift(new mr(r,t,!0,e))}}function Co(r,e){var t=arguments.length>=2;return function(n){return n.pipe(r?Q(function(i,o){return r(i,o,n)}):$,ce(1),t?Et(e):Ut(function(){return new _t}))}}function Oo(){return function(e){return e.lift(new Io)}}var Io=function(){function r(){}return r.prototype.call=function(e,t){return t.subscribe(new No(e))},r}(),No=function(r){a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._next=function(t){},e}(l);function Ao(){return function(r){return r.lift(new Vo)}}var Vo=function(){function r(){}return r.prototype.call=function(e,t){return t.subscribe(new Po(e))},r}(),Po=function(r){a(e,r);function e(t){return r.call(this,t)||this}return e.prototype.notifyComplete=function(t){var n=this.destination;n.next(t),n.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(l);function Wt(r){return function(t){return r===0?ct():t.lift(new jo(r))}}var jo=function(){function r(e){if(this.total=e,this.total<0)throw new ot}return r.prototype.call=function(e,t){return t.subscribe(new ko(e,this.total))},r}(),ko=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.total=n,i.ring=new Array,i.count=0,i}return e.prototype._next=function(t){var n=this.ring,i=this.total,o=this.count++;if(n.length<i)n.push(t);else{var s=o%i;n[s]=t}},e.prototype._complete=function(){var t=this.destination,n=this.count;if(n>0)for(var i=this.count>=this.total?this.total:this.count,o=this.ring,s=0;s<i;s++){var u=n++%i;t.next(o[u])}t.complete()},e}(l);function Ro(r,e){var t=arguments.length>=2;return function(n){return n.pipe(r?Q(function(i,o){return r(i,o,n)}):$,Wt(1),t?Et(e):Ut(function(){return new _t}))}}function Fo(r){return function(e){return e.lift(new Wo(r))}}var Wo=function(){function r(e){this.value=e}return r.prototype.call=function(e,t){return t.subscribe(new Mo(e,this.value))},r}(),Mo=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.value=n,i}return e.prototype._next=function(t){this.destination.next(this.value)},e}(l);function Do(){return function(e){return e.lift(new Bo)}}var Bo=function(){function r(){}return r.prototype.call=function(e,t){return t.subscribe(new Uo(e))},r}(),Uo=function(r){a(e,r);function e(t){return r.call(this,t)||this}return e.prototype._next=function(t){this.destination.next(D.createNext(t))},e.prototype._error=function(t){var n=this.destination;n.next(D.createError(t)),n.complete()},e.prototype._complete=function(){var t=this.destination;t.next(D.createComplete()),t.complete()},e}(l);function Mt(r,e){var t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new zo(r,e,t))}}var zo=function(){function r(e,t,n){n===void 0&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return r.prototype.call=function(e,t){return t.subscribe(new Lo(e,this.accumulator,this.seed,this.hasSeed))},r}(),Lo=function(r){a(e,r);function e(t,n,i,o){var s=r.call(this,t)||this;return s.accumulator=n,s._seed=i,s.hasSeed=o,s.index=0,s}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(!this.hasSeed)this.seed=t,this.destination.next(t);else return this._tryNext(t)},e.prototype._tryNext=function(t){var n=this.index++,i;try{i=this.accumulator(this.seed,t,n)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)},e}(l);function zt(r,e){return arguments.length>=2?function(n){return $t(Mt(r,e),Wt(1),Et(e))(n)}:function(n){return $t(Mt(function(i,o,s){return r(i,o,s+1)}),Wt(1))(n)}}function Go(r){var e=typeof r=="function"?function(t,n){return r(t,n)>0?t:n}:function(t,n){return t>n?t:n};return zt(e)}function qo(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return t.lift.call(or.apply(void 0,[t].concat(r)))}}function Yo(r,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),typeof e=="function"?X(function(){return r},e,t):(typeof e=="number"&&(t=e),X(function(){return r},t))}function $o(r,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),function(n){return n.lift(new Ho(r,e,t))}}var Ho=function(){function r(e,t,n){this.accumulator=e,this.seed=t,this.concurrent=n}return r.prototype.call=function(e,t){return t.subscribe(new Qo(e,this.accumulator,this.seed,this.concurrent))},r}(),Qo=function(r){a(e,r);function e(t,n,i,o){var s=r.call(this,t)||this;return s.accumulator=n,s.acc=i,s.concurrent=o,s.hasValue=!1,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(t){if(this.active<this.concurrent){var n=this.index++,i=this.destination,o=void 0;try{var s=this.accumulator;o=s(this.acc,t,n)}catch(u){return i.error(u)}this.active++,this._innerSub(o)}else this.buffer.push(t)},e.prototype._innerSub=function(t){var n=new x(this),i=this.destination;i.add(n);var o=E(t,n);o!==n&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t){var n=this.destination;this.acc=t,this.hasValue=!0,n.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},e}(_);function Zo(r){var e=typeof r=="function"?function(t,n){return r(t,n)<0?t:n}:function(t,n){return t<n?t:n};return zt(e)}function tt(r,e){return function(n){var i;if(typeof r=="function"?i=r:i=function(){return r},typeof e=="function")return n.lift(new Ko(i,e));var o=Object.create(n,Ar);return o.source=n,o.subjectFactory=i,o}}var Ko=function(){function r(e,t){this.subjectFactory=e,this.selector=t}return r.prototype.call=function(e,t){var n=this.selector,i=this.subjectFactory(),o=n(i).subscribe(e);return o.add(t.subscribe(i)),o},r}();function Jo(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length===1&&A(r[0])&&(r=r[0]),function(t){return t.lift(new Xo(r))}}var Xo=function(){function r(e){this.nextSources=e}return r.prototype.call=function(e,t){return t.subscribe(new ts(e,this.nextSources))},r}(),ts=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.destination=t,i.nextSources=n,i}return e.prototype.notifyError=function(){this.subscribeToNextSource()},e.prototype.notifyComplete=function(){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var n=new x(this),i=this.destination;i.add(n);var o=E(t,n);o!==n&&i.add(o)}else this.destination.complete()},e}(_);function es(){return function(r){return r.lift(new rs)}}var rs=function(){function r(){}return r.prototype.call=function(e,t){return t.subscribe(new ns(e))},r}(),ns=function(r){a(e,r);function e(t){var n=r.call(this,t)||this;return n.hasPrev=!1,n}return e.prototype._next=function(t){var n;this.hasPrev?n=[this.prev,t]:this.hasPrev=!0,this.prev=t,n&&this.destination.next(n)},e}(l);function is(r,e){return function(t){return[Q(r,e)(t),Q(ur(r,e))(t)]}}function os(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.length;if(t===0)throw new Error("list of properties cannot be empty.");return function(n){return F(ss(r,t))(n)}}function ss(r,e){var t=function(n){for(var i=n,o=0;o<e;o++){var s=i!=null?i[r[o]]:void 0;if(s!==void 0)i=s;else return}return i};return t}function us(r){return r?tt(function(){return new O},r):tt(new O)}function cs(r){return function(e){return tt(new Be(r))(e)}}function as(){return function(r){return tt(new at)(r)}}function fs(r,e,t,n){t&&typeof t!="function"&&(n=t);var i=typeof t=="function"?t:void 0,o=new ie(r,e,n);return function(s){return tt(function(){return o},i)(s)}}function hs(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(n){return r.length===1&&A(r[0])&&(r=r[0]),n.lift.call(cr.apply(void 0,[n].concat(r)))}}function ls(r){return r===void 0&&(r=-1),function(e){return r===0?ct():r<0?e.lift(new Ne(-1,e)):e.lift(new Ne(r-1,e))}}var Ne=function(){function r(e,t){this.count=e,this.source=t}return r.prototype.call=function(e,t){return t.subscribe(new ps(e,this.count,this.source))},r}(),ps=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.count=n,o.source=i,o}return e.prototype.complete=function(){if(!this.isStopped){var t=this,n=t.source,i=t.count;if(i===0)return r.prototype.complete.call(this);i>-1&&(this.count=i-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(l);function ds(r){return function(e){return e.lift(new bs(r))}}var bs=function(){function r(e){this.notifier=e}return r.prototype.call=function(e,t){return t.subscribe(new vs(e,this.notifier,t))},r}(),vs=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.notifier=n,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return e.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return r.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return r.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},e.prototype._unsubscribe=function(){var t=this,n=t.notifications,i=t.retriesSubscription;n&&(n.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,r.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},e.prototype.subscribeToRetries=function(){this.notifications=new O;var t;try{var n=this.notifier;t=n(this.notifications)}catch{return r.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=E(t,new x(this))},e}(_);function ys(r){return r===void 0&&(r=-1),function(e){return e.lift(new ms(r,e))}}var ms=function(){function r(e,t){this.count=e,this.source=t}return r.prototype.call=function(e,t){return t.subscribe(new ws(e,this.count,this.source))},r}(),ws=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.count=n,o.source=i,o}return e.prototype.error=function(t){if(!this.isStopped){var n=this,i=n.source,o=n.count;if(o===0)return r.prototype.error.call(this,t);o>-1&&(this.count=o-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(l);function Ss(r){return function(e){return e.lift(new gs(r,e))}}var gs=function(){function r(e,t){this.notifier=e,this.source=t}return r.prototype.call=function(e,t){return t.subscribe(new xs(e,this.notifier,this.source))},r}(),xs=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.notifier=n,o.source=i,o}return e.prototype.error=function(t){if(!this.isStopped){var n=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{n=new O;try{var s=this.notifier;i=s(n)}catch(u){return r.prototype.error.call(this,u)}o=E(i,new x(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=i,this.retriesSubscription=o,n.next(t)}},e.prototype._unsubscribe=function(){var t=this,n=t.errors,i=t.retriesSubscription;n&&(n.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)},e}(_);function _s(r){return function(e){return e.lift(new Es(r))}}var Es=function(){function r(e){this.notifier=e}return r.prototype.call=function(e,t){var n=new Ts(e),i=t.subscribe(n);return i.add(E(this.notifier,new x(n))),i},r}(),Ts=function(r){a(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.hasValue=!1,t}return e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(_);function Cs(r,e){return e===void 0&&(e=V),function(t){return t.lift(new Os(r,e))}}var Os=function(){function r(e,t){this.period=e,this.scheduler=t}return r.prototype.call=function(e,t){return t.subscribe(new Is(e,this.period,this.scheduler))},r}(),Is=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.period=n,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(Ns,n,{subscriber:o,period:n})),o}return e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(l);function Ns(r){var e=r.subscriber,t=r.period;e.notifyNext(),this.schedule(r,t)}function As(r,e){return function(t){return t.lift(new Vs(r,e))}}var Vs=function(){function r(e,t){this.compareTo=e,this.comparator=t}return r.prototype.call=function(e,t){return t.subscribe(new Ps(e,this.compareTo,this.comparator))},r}(),Ps=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.compareTo=n,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(n.subscribe(new js(t,o))),o}return e.prototype._next=function(t){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this,n=t._a,i=t._b,o=t.comparator;n.length>0&&i.length>0;){var s=n.shift(),u=i.shift(),c=!1;try{c=o?o(s,u):s===u}catch(f){this.destination.error(f)}c||this.emit(!1)}},e.prototype.emit=function(t){var n=this.destination;n.next(t),n.complete()},e.prototype.nextB=function(t){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},e}(l),js=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.parent=n,i}return e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(l);function ks(){return new O}function Rs(){return function(r){return ee()(tt(ks)(r))}}function Fs(r,e,t){var n;return r&&typeof r=="object"?n=r:n={bufferSize:r,windowTime:e,refCount:!1,scheduler:t},function(i){return i.lift(Ws(n))}}function Ws(r){var e=r.bufferSize,t=e===void 0?Number.POSITIVE_INFINITY:e,n=r.windowTime,i=n===void 0?Number.POSITIVE_INFINITY:n,o=r.refCount,s=r.scheduler,u,c=0,f,h=!1,p=!1;return function(I){c++;var N;!u||h?(h=!1,u=new ie(t,i,s),N=u.subscribe(this),f=I.subscribe({next:function(ft){u.next(ft)},error:function(ft){h=!0,u.error(ft)},complete:function(){p=!0,f=void 0,u.complete()}}),p&&(f=void 0)):N=u.subscribe(this),this.add(function(){c--,N.unsubscribe(),N=void 0,f&&!p&&o&&c===0&&(f.unsubscribe(),f=void 0,u=void 0)})}}function Ms(r){return function(e){return e.lift(new Ds(r,e))}}var Ds=function(){function r(e,t){this.predicate=e,this.source=t}return r.prototype.call=function(e,t){return t.subscribe(new Bs(e,this.predicate,this.source))},r}(),Bs=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.predicate=n,o.source=i,o.seenValue=!1,o.index=0,o}return e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var n=this.index++;this.predicate?this.tryNext(t,n):this.applySingleValue(t)},e.prototype.tryNext=function(t,n){try{this.predicate(t,n,this.source)&&this.applySingleValue(t)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new _t)},e}(l);function Us(r){return function(e){return e.lift(new zs(r))}}var zs=function(){function r(e){this.total=e}return r.prototype.call=function(e,t){return t.subscribe(new Ls(e,this.total))},r}(),Ls=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.total=n,i.count=0,i}return e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(l);function Gs(r){return function(e){return e.lift(new qs(r))}}var qs=function(){function r(e){if(this._skipCount=e,this._skipCount<0)throw new ot}return r.prototype.call=function(e,t){return this._skipCount===0?t.subscribe(new l(e)):t.subscribe(new Ys(e,this._skipCount))},r}(),Ys=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i._skipCount=n,i._count=0,i._ring=new Array(n),i}return e.prototype._next=function(t){var n=this._skipCount,i=this._count++;if(i<n)this._ring[i]=t;else{var o=i%n,s=this._ring,u=s[o];s[o]=t,this.destination.next(u)}},e}(l);function $s(r){return function(e){return e.lift(new Hs(r))}}var Hs=function(){function r(e){this.notifier=e}return r.prototype.call=function(e,t){return t.subscribe(new Qs(e,this.notifier))},r}(),Qs=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;i.hasValue=!1;var o=new x(i);i.add(o),i.innerSubscription=o;var s=E(n,o);return s!==o&&(i.add(s),i.innerSubscription=s),i}return e.prototype._next=function(t){this.hasValue&&r.prototype._next.call(this,t)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(_);function Zs(r){return function(e){return e.lift(new Ks(r))}}var Ks=function(){function r(e){this.predicate=e}return r.prototype.call=function(e,t){return t.subscribe(new Js(e,this.predicate))},r}(),Js=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return e.prototype._next=function(t){var n=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||n.next(t)},e.prototype.tryCallPredicate=function(t){try{var n=this.predicate(t,this.index++);this.skipping=!!n}catch(i){this.destination.error(i)}},e}(l);function Xs(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r[r.length-1];return j(t)?(r.pop(),function(n){return mt(r,n,t)}):function(n){return mt(r,n)}}var tu=function(r){a(e,r);function e(t,n,i){n===void 0&&(n=0),i===void 0&&(i=kt);var o=r.call(this)||this;return o.source=t,o.delayTime=n,o.scheduler=i,(!st(n)||n<0)&&(o.delayTime=0),(!i||typeof i.schedule!="function")&&(o.scheduler=kt),o}return e.create=function(t,n,i){return n===void 0&&(n=0),i===void 0&&(i=kt),new e(t,n,i)},e.dispatch=function(t){var n=t.source,i=t.subscriber;return this.add(n.subscribe(i))},e.prototype._subscribe=function(t){var n=this.delayTime,i=this.source,o=this.scheduler;return o.schedule(e.dispatch,n,{source:i,subscriber:t})},e}(y);function eu(r,e){return e===void 0&&(e=0),function(n){return n.lift(new ru(r,e))}}var ru=function(){function r(e,t){this.scheduler=e,this.delay=t}return r.prototype.call=function(e,t){return new tu(t,this.delay,this.scheduler).subscribe(e)},r}();function wt(r,e){return typeof e=="function"?function(t){return t.pipe(wt(function(n,i){return U(r(n,i)).pipe(F(function(o,s){return e(n,o,i,s)}))}))}:function(t){return t.lift(new nu(r))}}var nu=function(){function r(e){this.project=e}return r.prototype.call=function(e,t){return t.subscribe(new iu(e,this.project))},r}(),iu=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.project=n,i.index=0,i}return e.prototype._next=function(t){var n,i=this.index++;try{n=this.project(t,i)}catch(o){this.destination.error(o);return}this._innerSub(n)},e.prototype._innerSub=function(t){var n=this.innerSubscription;n&&n.unsubscribe();var i=new x(this),o=this.destination;o.add(i),this.innerSubscription=E(t,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},e.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&r.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&r.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(_);function ou(){return wt($)}function su(r,e){return e?wt(function(){return r},e):wt(function(){return r})}function uu(r){return function(e){return e.lift(new cu(r))}}var cu=function(){function r(e){this.notifier=e}return r.prototype.call=function(e,t){var n=new au(e),i=E(this.notifier,new x(n));return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n},r}(),au=function(r){a(e,r);function e(t){var n=r.call(this,t)||this;return n.seenValue=!1,n}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(_);function fu(r,e){return e===void 0&&(e=!1),function(t){return t.lift(new hu(r,e))}}var hu=function(){function r(e,t){this.predicate=e,this.inclusive=t}return r.prototype.call=function(e,t){return t.subscribe(new lu(e,this.predicate,this.inclusive))},r}(),lu=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.predicate=n,o.inclusive=i,o.index=0,o}return e.prototype._next=function(t){var n=this.destination,i;try{i=this.predicate(t,this.index++)}catch(o){n.error(o);return}this.nextOrComplete(t,i)},e.prototype.nextOrComplete=function(t,n){var i=this.destination;n?i.next(t):(this.inclusive&&i.next(t),i.complete())},e}(l);function pu(r,e,t){return function(i){return i.lift(new du(r,e,t))}}var du=function(){function r(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return r.prototype.call=function(e,t){return t.subscribe(new bu(e,this.nextOrObserver,this.error,this.complete))},r}(),bu=function(r){a(e,r);function e(t,n,i,o){var s=r.call(this,t)||this;return s._tapNext=W,s._tapError=W,s._tapComplete=W,s._tapError=i||W,s._tapComplete=o||W,nt(n)?(s._context=s,s._tapNext=n):n&&(s._context=n,s._tapNext=n.next||W,s._tapError=n.error||W,s._tapComplete=n.complete||W),s}return e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(n){this.destination.error(n);return}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(n){this.destination.error(n);return}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){this.destination.error(t);return}return this.destination.complete()},e}(l),wr={leading:!0,trailing:!1};function vu(r,e){return e===void 0&&(e=wr),function(t){return t.lift(new yu(r,!!e.leading,!!e.trailing))}}var yu=function(){function r(e,t,n){this.durationSelector=e,this.leading=t,this.trailing=n}return r.prototype.call=function(e,t){return t.subscribe(new mu(e,this.durationSelector,this.leading,this.trailing))},r}(),mu=function(r){a(e,r);function e(t,n,i,o){var s=r.call(this,t)||this;return s.destination=t,s.durationSelector=n,s._leading=i,s._trailing=o,s._hasValue=!1,s}return e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this,n=t._hasValue,i=t._sendValue;n&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(t){var n=this.tryDurationSelector(t);n&&this.add(this._throttled=E(n,new x(this)))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(n){return this.destination.error(n),null}},e.prototype.throttlingDone=function(){var t=this,n=t._throttled,i=t._trailing;n&&n.unsubscribe(),this._throttled=void 0,i&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(_);function wu(r,e,t){return e===void 0&&(e=V),t===void 0&&(t=wr),function(n){return n.lift(new Su(r,e,t.leading,t.trailing))}}var Su=function(){function r(e,t,n,i){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=i}return r.prototype.call=function(e,t){return t.subscribe(new gu(e,this.duration,this.scheduler,this.leading,this.trailing))},r}(),gu=function(r){a(e,r);function e(t,n,i,o,s){var u=r.call(this,t)||this;return u.duration=n,u.scheduler=i,u.leading=o,u.trailing=s,u._hasTrailingValue=!1,u._trailingValue=null,u}return e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(xu,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(l);function xu(r){var e=r.subscriber;e.clearThrottle()}function _u(r){return r===void 0&&(r=V),function(e){return ue(function(){return e.pipe(Mt(function(t,n){var i=t.current;return{value:n,current:r.now(),last:i}},{current:r.now(),value:void 0,last:void 0}),F(function(t){var n=t.current,i=t.last,o=t.value;return new Eu(o,n-i)}))})}}var Eu=function(){function r(e,t){this.value=e,this.interval=t}return r}();function Sr(r,e,t){return t===void 0&&(t=V),function(n){var i=br(r),o=i?+r-t.now():Math.abs(r);return n.lift(new Tu(o,i,e,t))}}var Tu=function(){function r(e,t,n,i){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=i}return r.prototype.call=function(e,t){return t.subscribe(new Cu(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},r}(),Cu=function(r){a(e,r);function e(t,n,i,o,s){var u=r.call(this,t)||this;return u.absoluteTimeout=n,u.waitFor=i,u.withObservable=o,u.scheduler=s,u.scheduleTimeout(),u}return e.dispatchTimeout=function(t){var n=t.withObservable;t._unsubscribeAndRecycle(),t.add(E(n,new x(t)))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),r.prototype._next.call(this,t)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(_);function Ou(r,e){return e===void 0&&(e=V),Sr(r,ne(new Qe),e)}function Iu(r){return r===void 0&&(r=V),F(function(e){return new Nu(e,r.now())})}var Nu=function(){function r(e,t){this.value=e,this.timestamp=t}return r}();function Au(r,e,t){return t===0?[e]:(r.push(e),r)}function Vu(){return zt(Au,[])}function Pu(r){return function(t){return t.lift(new ju(r))}}var ju=function(){function r(e){this.windowBoundaries=e}return r.prototype.call=function(e,t){var n=new ku(e),i=t.subscribe(n);return i.closed||n.add(E(this.windowBoundaries,new x(n))),i},r}(),ku=function(r){a(e,r);function e(t){var n=r.call(this,t)||this;return n.window=new O,t.next(n.window),n}return e.prototype.notifyNext=function(){this.openWindow()},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var n=this.destination,i=this.window=new O;n.next(i)},e}(_);function Ru(r,e){return e===void 0&&(e=0),function(n){return n.lift(new Fu(r,e))}}var Fu=function(){function r(e,t){this.windowSize=e,this.startWindowEvery=t}return r.prototype.call=function(e,t){return t.subscribe(new Wu(e,this.windowSize,this.startWindowEvery))},r}(),Wu=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.destination=t,o.windowSize=n,o.startWindowEvery=i,o.windows=[new O],o.count=0,t.next(o.windows[0]),o}return e.prototype._next=function(t){for(var n=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,o=this.windowSize,s=this.windows,u=s.length,c=0;c<u&&!this.closed;c++)s[c].next(t);var f=this.count-o+1;if(f>=0&&f%n===0&&!this.closed&&s.shift().complete(),++this.count%n===0&&!this.closed){var h=new O;s.push(h),i.next(h)}},e.prototype._error=function(t){var n=this.windows;if(n)for(;n.length>0&&!this.closed;)n.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(l);function Mu(r){var e=V,t=null,n=Number.POSITIVE_INFINITY;return j(arguments[3])&&(e=arguments[3]),j(arguments[2])?e=arguments[2]:st(arguments[2])&&(n=Number(arguments[2])),j(arguments[1])?e=arguments[1]:st(arguments[1])&&(t=Number(arguments[1])),function(o){return o.lift(new Du(r,t,n,e))}}var Du=function(){function r(e,t,n,i){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=n,this.scheduler=i}return r.prototype.call=function(e,t){return t.subscribe(new Uu(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},r}(),Bu=function(r){a(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return e.prototype.next=function(t){this._numberOfNextedValues++,r.prototype.next.call(this,t)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(O),Uu=function(r){a(e,r);function e(t,n,i,o,s){var u=r.call(this,t)||this;u.destination=t,u.windowTimeSpan=n,u.windowCreationInterval=i,u.maxWindowSize=o,u.scheduler=s,u.windows=[];var c=u.openWindow();if(i!==null&&i>=0){var f={subscriber:u,window:c,context:null},h={windowTimeSpan:n,windowCreationInterval:i,subscriber:u,scheduler:s};u.add(s.schedule(gr,n,f)),u.add(s.schedule(Lu,i,h))}else{var p={subscriber:u,window:c,windowTimeSpan:n};u.add(s.schedule(zu,n,p))}return u}return e.prototype._next=function(t){for(var n=this.windows,i=n.length,o=0;o<i;o++){var s=n[o];s.closed||(s.next(t),s.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(s))}},e.prototype._error=function(t){for(var n=this.windows;n.length>0;)n.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var n=t.shift();n.closed||n.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new Bu;this.windows.push(t);var n=this.destination;return n.next(t),t},e.prototype.closeWindow=function(t){t.complete();var n=this.windows;n.splice(n.indexOf(t),1)},e}(l);function zu(r){var e=r.subscriber,t=r.windowTimeSpan,n=r.window;n&&e.closeWindow(n),r.window=e.openWindow(),this.schedule(r,t)}function Lu(r){var e=r.windowTimeSpan,t=r.subscriber,n=r.scheduler,i=r.windowCreationInterval,o=t.openWindow(),s=this,u={action:s,subscription:null},c={subscriber:t,window:o,context:u};u.subscription=n.schedule(gr,e,c),s.add(u.subscription),s.schedule(r,i)}function gr(r){var e=r.subscriber,t=r.window,n=r.context;n&&n.action&&n.subscription&&n.action.remove(n.subscription),e.closeWindow(t)}function Gu(r,e){return function(t){return t.lift(new qu(r,e))}}var qu=function(){function r(e,t){this.openings=e,this.closingSelector=t}return r.prototype.call=function(e,t){return t.subscribe(new Yu(e,this.openings,this.closingSelector))},r}(),Yu=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;return o.openings=n,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=B(o,n,n)),o}return e.prototype._next=function(t){var n=this.contexts;if(n)for(var i=n.length,o=0;o<i;o++)n[o].window.next(t)},e.prototype._error=function(t){var n=this.contexts;if(this.contexts=null,n)for(var i=n.length,o=-1;++o<i;){var s=n[o];s.window.error(t),s.subscription.unsubscribe()}r.prototype._error.call(this,t)},e.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,i=-1;++i<n;){var o=t[i];o.window.complete(),o.subscription.unsubscribe()}r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var n=t.length,i=-1;++i<n;){var o=t[i];o.window.unsubscribe(),o.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,n,i,o,s){if(t===this.openings){var u=void 0;try{var c=this.closingSelector;u=c(n)}catch(I){return this.error(I)}var f=new O,h=new g,p={window:f,subscription:h};this.contexts.push(p);var d=B(this,u,p);d.closed?this.closeWindow(this.contexts.length-1):(d.context=p,h.add(d)),this.destination.next(f)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(t!==-1){var n=this.contexts,i=n[t],o=i.window,s=i.subscription;n.splice(t,1),o.complete(),s.unsubscribe()}},e}(et);function $u(r){return function(t){return t.lift(new Hu(r))}}var Hu=function(){function r(e){this.closingSelector=e}return r.prototype.call=function(e,t){return t.subscribe(new Qu(e,this.closingSelector))},r}(),Qu=function(r){a(e,r);function e(t,n){var i=r.call(this,t)||this;return i.destination=t,i.closingSelector=n,i.openWindow(),i}return e.prototype.notifyNext=function(t,n,i,o,s){this.openWindow(s)},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){t===void 0&&(t=null),t&&(this.remove(t),t.unsubscribe());var n=this.window;n&&n.complete();var i=this.window=new O;this.destination.next(i);var o;try{var s=this.closingSelector;o=s()}catch(u){this.destination.error(u),this.window.error(u);return}this.add(this.closingNotification=B(this,o))},e}(et);function Zu(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){var n;typeof r[r.length-1]=="function"&&(n=r.pop());var i=r;return t.lift(new Ku(i,n))}}var Ku=function(){function r(e,t){this.observables=e,this.project=t}return r.prototype.call=function(e,t){return t.subscribe(new Ju(e,this.observables,this.project))},r}(),Ju=function(r){a(e,r);function e(t,n,i){var o=r.call(this,t)||this;o.observables=n,o.project=i,o.toRespond=[];var s=n.length;o.values=new Array(s);for(var u=0;u<s;u++)o.toRespond.push(u);for(var u=0;u<s;u++){var c=n[u];o.add(B(o,c,void 0,u))}return o}return e.prototype.notifyNext=function(t,n,i){this.values[i]=n;var o=this.toRespond;if(o.length>0){var s=o.indexOf(i);s!==-1&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(this.toRespond.length===0){var n=[t].concat(this.values);this.project?this._tryProject(n):this.destination.next(n)}},e.prototype._tryProject=function(t){var n;try{n=this.project.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(n)},e}(et);function Xu(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(n){return n.lift.call(fr.apply(void 0,[n].concat(r)))}}function tc(r){return function(e){return e.lift(new hr(r))}}const ec=Object.freeze(Object.defineProperty({__proto__:null,audit:lr,auditTime:ti,buffer:ei,bufferCount:ii,bufferTime:ci,bufferToggle:pi,bufferWhen:vi,catchError:wi,combineAll:xi,combineLatest:_i,concat:Ei,concatAll:er,concatMap:dr,concatMapTo:Ti,count:Ci,debounce:Ni,debounceTime:Pi,defaultIfEmpty:Et,delay:Mi,delayWhen:zi,dematerialize:Yi,distinct:Qi,distinctUntilChanged:vr,distinctUntilKeyChanged:to,elementAt:so,endWith:uo,every:co,exhaust:ho,exhaustMap:yr,expand:yo,filter:Q,finalize:So,find:_o,findIndex:To,first:Co,flatMap:Tn,groupBy:Pr,ignoreElements:Oo,isEmpty:Ao,last:Ro,map:F,mapTo:Fo,materialize:Do,max:Go,merge:qo,mergeAll:se,mergeMap:X,mergeMapTo:Yo,mergeScan:$o,min:Zo,multicast:tt,observeOn:zr,onErrorResumeNext:Jo,pairwise:es,partition:is,pluck:os,publish:us,publishBehavior:cs,publishLast:as,publishReplay:fs,race:hs,reduce:zt,refCount:ee,repeat:ls,repeatWhen:ds,retry:ys,retryWhen:Ss,sample:_s,sampleTime:Cs,scan:Mt,sequenceEqual:As,share:Rs,shareReplay:Fs,single:Ms,skip:Us,skipLast:Gs,skipUntil:$s,skipWhile:Zs,startWith:Xs,subscribeOn:eu,switchAll:ou,switchMap:wt,switchMapTo:su,take:ce,takeLast:Wt,takeUntil:uu,takeWhile:fu,tap:pu,throttle:vu,throttleTime:wu,throwIfEmpty:Ut,timeInterval:_u,timeout:Ou,timeoutWith:Sr,timestamp:Iu,toArray:Vu,window:Pu,windowCount:Ru,windowTime:Mu,windowToggle:Gu,windowWhen:$u,withLatestFrom:Zu,zip:Xu,zipAll:tc},Symbol.toStringTag,{value:"Module"})),Tt=Re(ec);var M={};Object.defineProperty(M,"__esModule",{value:!0});var Vt=Tt;function rc(r){return r.pipe(Vt.concatMap(function(e){return e.split("")}),Vt.scan(function(e,t){return e.indexOf("}")>=0?t:e+t},""),Vt.filter(function(e){return e.indexOf("}")>=0}),Vt.map(function(e){return JSON.parse(e)}))}M.parseControl=rc;function xr(r){for(var e=[],t=0;t<r.length;t++)t%3===0?e.push(r[t]<<4|r[t+1]>>4):(e.push((r[t]&15)<<8|r[t+1]),t++);return e}M.decodeUnsigned12BitData=xr;function _r(r){for(var e=[],t=0;t<r.length;t=t+3)e.push(r[t]<<16|r[t+1]<<8|r[t+2]);return e}M.decodeUnsigned24BitData=_r;function nc(r){return xr(r).map(function(e){return .48828125*(e-2048)})}M.decodeEEGSamples=nc;function ic(r){return _r(r)}M.decodePPGSamples=ic;function oc(r){return{sequenceId:r.getUint16(0),batteryLevel:r.getUint16(2)/512,fuelGaugeVoltage:r.getUint16(4)*2.2,temperature:r.getUint16(8)}}M.parseTelemetry=oc;function Er(r,e){function t(n){return{x:e*r.getInt16(n),y:e*r.getInt16(n+2),z:e*r.getInt16(n+4)}}return{sequenceId:r.getUint16(0),samples:[t(2),t(8),t(14)]}}function sc(r){return Er(r,610352e-10)}M.parseAccelerometer=sc;function uc(r){return Er(r,.0074768)}M.parseGyroscope=uc;var Ct={},cc=Y&&Y.__awaiter||function(r,e,t,n){return new(t||(t=Promise))(function(i,o){function s(f){try{c(n.next(f))}catch(h){o(h)}}function u(f){try{c(n.throw(f))}catch(h){o(h)}}function c(f){f.done?i(f.value):new t(function(h){h(f.value)}).then(s,u)}c((n=n.apply(r,e||[])).next())})},ac=Y&&Y.__generator||function(r,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(h){return c([f,h])}}function c(f){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(h){f=[6,h],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}};Object.defineProperty(Ct,"__esModule",{value:!0});var Ae=Bt,Ve=Tt;function fc(r){return new TextDecoder().decode(r.subarray(1,1+r[0]))}Ct.decodeResponse=fc;function hc(r){var e=new TextEncoder().encode("X"+r+`
`);return e[0]=e.length-1,e}Ct.encodeCommand=hc;function lc(r){return cc(this,void 0,void 0,function(){var e;return ac(this,function(t){switch(t.label){case 0:return[4,r.startNotifications()];case 1:return t.sent(),e=Ae.fromEvent(r.service.device,"gattserverdisconnected"),[2,Ae.fromEvent(r,"characteristicvaluechanged").pipe(Ve.takeUntil(e),Ve.map(function(n){return n.target.value}))]}})})}Ct.observableCharacteristic=lc;var Pt={},Pe;function pc(){if(Pe)return Pt;Pe=1,Object.defineProperty(Pt,"__esModule",{value:!0});var r=Bt,e=Tt,t=ae();function n(i){var o=[],s=null;return i.pipe(e.mergeMap(function(u){if(u.timestamp!==s&&(s=u.timestamp,o.length)){var c=r.from([o.slice()]);return o.splice(0,o.length,u),c}return o.push(u),r.from([])}),e.concat(r.from([o])),e.mergeMap(function(u){var c=u[0].samples.map(function(f,h){for(var p=[NaN,NaN,NaN,NaN,NaN],d=0,I=u;d<I.length;d++){var N=I[d];p[N.electrode]=N.samples[h]}return{data:p,index:u[0].index,timestamp:u[0].timestamp+h*1e3/t.EEG_FREQUENCY}});return r.from(c)}))}return Pt.zipSamples=n,Pt}var jt={},je;function dc(){if(je)return jt;je=1,Object.defineProperty(jt,"__esModule",{value:!0});var r=Bt,e=Tt,t=ae();function n(i){var o=[],s=null;return i.pipe(e.mergeMap(function(u){if(u.timestamp!==s&&(s=u.timestamp,o.length)){var c=r.from([o.slice()]);return o.splice(0,o.length,u),c}return o.push(u),r.from([])}),e.concat(r.from([o])),e.mergeMap(function(u){var c=u[0].samples.map(function(f,h){for(var p=[NaN,NaN,NaN],d=0,I=u;d<I.length;d++){var N=I[d];p[N.ppgChannel]=N.samples[h]}return{data:p,index:u[0].index,timestamp:u[0].timestamp+h*1e3/t.PPG_FREQUENCY}});return r.from(c)}))}return jt.zipSamplesPpg=n,jt}var ke;function ae(){return ke||(ke=1,function(r){var e=Y&&Y.__awaiter||function(P,w,b,C){return new(b||(b=Promise))(function(S,m){function z(v){try{G(C.next(v))}catch(k){m(k)}}function L(v){try{G(C.throw(v))}catch(k){m(k)}}function G(v){v.done?S(v.value):new b(function(k){k(v.value)}).then(z,L)}G((C=C.apply(P,w||[])).next())})},t=Y&&Y.__generator||function(P,w){var b={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},C,S,m,z;return z={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function L(v){return function(k){return G([v,k])}}function G(v){if(C)throw new TypeError("Generator is already executing.");for(;b;)try{if(C=1,S&&(m=v[0]&2?S.return:v[0]?S.throw||((m=S.return)&&m.call(S),0):S.next)&&!(m=m.call(S,v[1])).done)return m;switch(S=0,m&&(v=[v[0]&2,m.value]),v[0]){case 0:case 1:m=v;break;case 4:return b.label++,{value:v[1],done:!1};case 5:b.label++,S=v[1],v=[0];continue;case 7:v=b.ops.pop(),b.trys.pop();continue;default:if(m=b.trys,!(m=m.length>0&&m[m.length-1])&&(v[0]===6||v[0]===2)){b=0;continue}if(v[0]===3&&(!m||v[1]>m[0]&&v[1]<m[3])){b.label=v[1];break}if(v[0]===6&&b.label<m[1]){b.label=m[1],m=v;break}if(m&&b.label<m[2]){b.label=m[2],b.ops.push(v);break}m[2]&&b.ops.pop(),b.trys.pop();continue}v=w.call(P,b)}catch(k){v=[6,k],S=0}finally{C=m=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}};Object.defineProperty(r,"__esModule",{value:!0});var n=Bt,i=Tt,o=M,s=Ct,u=pc();r.zipSamples=u.zipSamples;var c=dc();r.zipSamplesPpg=c.zipSamplesPpg,r.MUSE_SERVICE=65165;var f="273e0001-4c4d-454d-96be-f03bac821358",h="273e000b-4c4d-454d-96be-f03bac821358",p="273e0009-4c4d-454d-96be-f03bac821358",d="273e000a-4c4d-454d-96be-f03bac821358",I=["273e000f-4c4d-454d-96be-f03bac821358","273e0010-4c4d-454d-96be-f03bac821358","273e0011-4c4d-454d-96be-f03bac821358"];r.PPG_FREQUENCY=64,r.PPG_SAMPLES_PER_READING=6;var N=["273e0003-4c4d-454d-96be-f03bac821358","273e0004-4c4d-454d-96be-f03bac821358","273e0005-4c4d-454d-96be-f03bac821358","273e0006-4c4d-454d-96be-f03bac821358","273e0007-4c4d-454d-96be-f03bac821358"];r.EEG_FREQUENCY=256,r.EEG_SAMPLES_PER_READING=12,r.ppgChannelNames=["ambient","infrared","red"],r.channelNames=["TP9","AF7","AF8","TP10","AUX"];var ft=function(){function P(){this.enableAux=!1,this.enablePpg=!1,this.deviceName="",this.connectionStatus=new n.BehaviorSubject(!1),this.gatt=null,this.lastIndex=null,this.lastTimestamp=null}return P.prototype.connect=function(w){return e(this,void 0,void 0,function(){var b,C,S,m,z,L,G,v,k,fe,he,Lt,le,pe,de,Ot,Gt,be,ve,ye,It,Nt=this;return t(this,function(T){switch(T.label){case 0:return w?(this.gatt=w,[3,4]):[3,1];case 1:return[4,navigator.bluetooth.requestDevice({filters:[{services:[r.MUSE_SERVICE]}]})];case 2:return b=T.sent(),C=this,[4,b.gatt.connect()];case 3:C.gatt=T.sent(),T.label=4;case 4:return this.deviceName=this.gatt.device.name||null,[4,this.gatt.getPrimaryService(r.MUSE_SERVICE)];case 5:return S=T.sent(),n.fromEvent(this.gatt.device,"gattserverdisconnected").pipe(i.first()).subscribe(function(){Nt.gatt=null,Nt.connectionStatus.next(!1)}),m=this,[4,S.getCharacteristic(f)];case 6:return m.controlChar=T.sent(),z=this,[4,s.observableCharacteristic(this.controlChar)];case 7:return z.rawControlData=T.sent().pipe(i.map(function(Z){return s.decodeResponse(new Uint8Array(Z.buffer))}),i.share()),this.controlResponses=o.parseControl(this.rawControlData),[4,S.getCharacteristic(h)];case 8:return L=T.sent(),G=this,[4,s.observableCharacteristic(L)];case 9:return G.telemetryData=T.sent().pipe(i.map(o.parseTelemetry)),[4,S.getCharacteristic(p)];case 10:return v=T.sent(),k=this,[4,s.observableCharacteristic(v)];case 11:return k.gyroscopeData=T.sent().pipe(i.map(o.parseGyroscope)),[4,S.getCharacteristic(d)];case 12:return fe=T.sent(),he=this,[4,s.observableCharacteristic(fe)];case 13:if(he.accelerometerData=T.sent().pipe(i.map(o.parseAccelerometer)),this.eventMarkers=new n.Subject,!this.enablePpg)return[3,18];this.ppgCharacteristics=[],Lt=[],le=I.length,pe=function(Z){var ht,K,lt,pt;return t(this,function(J){switch(J.label){case 0:return ht=I[Z],[4,S.getCharacteristic(ht)];case 1:return K=J.sent(),pt=(lt=Lt).push,[4,s.observableCharacteristic(K)];case 2:return pt.apply(lt,[J.sent().pipe(i.map(function(dt){var bt=dt.getUint16(0);return{index:bt,ppgChannel:Z,samples:o.decodePPGSamples(new Uint8Array(dt.buffer).subarray(2)),timestamp:Nt.getTimestamp(bt,r.PPG_SAMPLES_PER_READING,r.PPG_FREQUENCY)}}))]),de.ppgCharacteristics.push(K),[2]}})},de=this,Ot=0,T.label=14;case 14:return Ot<le?[5,pe(Ot)]:[3,17];case 15:T.sent(),T.label=16;case 16:return Ot++,[3,14];case 17:this.ppgReadings=n.merge.apply(void 0,Lt),T.label=18;case 18:this.eegCharacteristics=[],Gt=[],be=this.enableAux?N.length:4,ve=function(Z){var ht,K,lt,pt;return t(this,function(J){switch(J.label){case 0:return ht=N[Z],[4,S.getCharacteristic(ht)];case 1:return K=J.sent(),pt=(lt=Gt).push,[4,s.observableCharacteristic(K)];case 2:return pt.apply(lt,[J.sent().pipe(i.map(function(dt){var bt=dt.getUint16(0);return{electrode:Z,index:bt,samples:o.decodeEEGSamples(new Uint8Array(dt.buffer).subarray(2)),timestamp:Nt.getTimestamp(bt,r.EEG_SAMPLES_PER_READING,r.EEG_FREQUENCY)}}))]),ye.eegCharacteristics.push(K),[2]}})},ye=this,It=0,T.label=19;case 19:return It<be?[5,ve(It)]:[3,22];case 20:T.sent(),T.label=21;case 21:return It++,[3,19];case 22:return this.eegReadings=n.merge.apply(void 0,Gt),this.connectionStatus.next(!0),[2]}})})},P.prototype.sendCommand=function(w){return e(this,void 0,void 0,function(){return t(this,function(b){switch(b.label){case 0:return[4,this.controlChar.writeValue(s.encodeCommand(w))];case 1:return b.sent(),[2]}})})},P.prototype.start=function(){return e(this,void 0,void 0,function(){var w;return t(this,function(b){switch(b.label){case 0:return[4,this.pause()];case 1:return b.sent(),w="p21",this.enablePpg?w="p50":this.enableAux&&(w="p20"),[4,this.controlChar.writeValue(s.encodeCommand(w))];case 2:return b.sent(),[4,this.controlChar.writeValue(s.encodeCommand("s"))];case 3:return b.sent(),[4,this.resume()];case 4:return b.sent(),[2]}})})},P.prototype.pause=function(){return e(this,void 0,void 0,function(){return t(this,function(w){switch(w.label){case 0:return[4,this.sendCommand("h")];case 1:return w.sent(),[2]}})})},P.prototype.resume=function(){return e(this,void 0,void 0,function(){return t(this,function(w){switch(w.label){case 0:return[4,this.sendCommand("d")];case 1:return w.sent(),[2]}})})},P.prototype.deviceInfo=function(){return e(this,void 0,void 0,function(){var w;return t(this,function(b){switch(b.label){case 0:return w=this.controlResponses.pipe(i.filter(function(C){return!!C.fw}),i.take(1)).toPromise(),[4,this.sendCommand("v1")];case 1:return b.sent(),[2,w]}})})},P.prototype.injectMarker=function(w,b){return b===void 0&&(b=new Date().getTime()),e(this,void 0,void 0,function(){return t(this,function(C){switch(C.label){case 0:return[4,this.eventMarkers.next({value:w,timestamp:b})];case 1:return C.sent(),[2]}})})},P.prototype.disconnect=function(){this.gatt&&(this.lastIndex=null,this.lastTimestamp=null,this.gatt.disconnect(),this.connectionStatus.next(!1))},P.prototype.getTimestamp=function(w,b,C){var S=1e3*(1/C)*b;for((this.lastIndex===null||this.lastTimestamp===null)&&(this.lastIndex=w,this.lastTimestamp=new Date().getTime()-S);this.lastIndex-w>4096;)w+=65536;return w===this.lastIndex?this.lastTimestamp:w>this.lastIndex?(this.lastTimestamp+=S*(w-this.lastIndex),this.lastIndex=w,this.lastTimestamp):this.lastTimestamp-S*(this.lastIndex-w)},P}();r.MuseClient=ft}(qt)),qt}var bc=ae();export{bc as m};
